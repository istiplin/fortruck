window['ymaps_loader_1z4o3x2u2w2y4e2O:I:Z;:@6@7;b;J;cqo@q;0@8qyql@@qm@9@jqn@iqw@$@.qp@-qx@_@z452-2.2*2)2:2z2J2Z3b3d5h3p'](
[
['1z', function (ym) {
ym.modules.define('check', ["system.provideCss"], function (provide, systemProvideCss) {
systemProvideCss('.ymaps-2-1-64-check,.ymaps-2-1-64-check__box{color:#000;font-family:Arial,Helvetica,sans-serif;display:inline-block;cursor:pointer}.ymaps-2-1-64-check__box{box-sizing:border-box!important;border-width:1px;border-style:solid;border-radius:3px;background-clip:border-box;vertical-align:middle;text-decoration:none;-webkit-transition:background-color .15s ease-out,border-color .15s ease-out,opacity .15s ease-out;transition:background-color .15s ease-out,border-color .15s ease-out,opacity .15s ease-out;text-align:left;background-color:#fff;border-color:rgba(0,0,0,.2)}a.ymaps-2-1-64-check__box,a.ymaps-2-1-64-check__box:active,a.ymaps-2-1-64-check__box:hover,a.ymaps-2-1-64-check__box:link,a.ymaps-2-1-64-check__box:visited{color:#000!important;text-decoration:none!important}.ymaps-2-1-64-check__box:hover{border-color:rgba(0,0,0,.3)}.ymaps-2-1-64-check__box.ymaps-2-1-64-_pressed,.ymaps-2-1-64-check__box:active{background-color:#f3f1ed}.ymaps-2-1-64-check__box.ymaps-2-1-64-_disabled{cursor:default;background-color:#ebebeb}.ymaps-2-1-64-check{position:relative;padding-left:19px}.ymaps-2-1-64-check.ymaps-2-1-64-_disabled{cursor:default}.ymaps-2-1-64-check__control{position:absolute;left:-2px;top:-2px;opacity:0;z-index:-1}.ymaps-2-1-64-check__box{width:14px;height:14px;padding:0;position:absolute;left:0;font-size:0;line-height:0}.ymaps-2-1-64-check__box:after{content:\'\';position:absolute;left:0;bottom:2px;width:16px;height:16px}.ymaps-2-1-64-check__control:checked+.ymaps-2-1-64-check__box{background-color:#ffeba0}.ymaps-2-1-64-check__control:checked+.ymaps-2-1-64-check__box:after{background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNSIgaGVpZ2h0PSIxNiI+PHBhdGggZD0iTTEzLjUxLjQ1TDUuNDcgMTIuNDhsLTMuNzYtNC4yTC42NyA5LjYxbDQuOTMgNS40NUwxNC43MiAxLjZ6Ii8+PC9zdmc+) no-repeat center}.ymaps-2-1-64-check__control:checked+.ymaps-2-1-64-check__box.ymaps-2-1-64-_pressed{background-color:#fee481}.ymaps-2-1-64-check__control:disabled+.ymaps-2-1-64-check__box,.ymaps-2-1-64-check__control:disabled~.ymaps-2-1-64-check__label-text{opacity:.5}.ymaps-2-1-64-check__control:checked:disabled+.ymaps-2-1-64-check__box{background-color:#d9d9d9!important}', provide);
});}],
['4o', function (ym) {
ym.modules.define('error-message', ["system.provideCss"], function (provide, systemProvideCss) {
systemProvideCss('.ymaps-2-1-64-error-message{display:table;margin:10px 0;padding:0 10px 0 45px;height:25px;background-position:10px 50%;background-repeat:no-repeat;color:#333;font:13px/1.2 Arial,sans-serif}.ymaps-2-1-64-error-message__msg{display:table-cell;vertical-align:middle}.ymaps-2-1-64-error-message{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNSIgaGVpZ2h0PSIyNSI+PHBhdGggZmlsbD0iI0JFQkVCRSIgZD0iTTEyLjUgMjVhMTIuNSAxMi41IDAgMSAwIDAtMjUgMTIuNSAxMi41IDAgMCAwIDAgMjVzLTYuOSAwIDAgMHoiLz48cGF0aCBmaWxsPSIjRkZGIiBkPSJNMTIuNSAyMi4xMWE5LjUgOS41IDAgMSAwIDAtMTkgOS41IDkuNSAwIDAgMCAwIDE5YzAtLjAxLTUuMi0uMDEgMCAweiIvPjxlbGxpcHNlIGN4PSI4LjUiIGN5PSI5LjkiIGZpbGw9IiNCRUJFQkUiIHJ4PSIxLjUiIHJ5PSIxLjYiLz48ZWxsaXBzZSBjeD0iMTYuNSIgY3k9IjkuOSIgZmlsbD0iI0JFQkVCRSIgcng9IjEuNSIgcnk9IjEuNiIvPjxwYXRoIGZpbGw9IiNCRUJFQkUiIGQ9Ik0xMi41IDE0LjQ4YzMuMDQgMCA1LjUuNiA1LjUgMS40NCAwIC44LTIuNDYgMS40NC01LjUgMS40NFM3IDE2LjcyIDcgMTUuOTJjMC0uODIgMi41LTEuNDIgNS41LTEuNDR6Ii8+PC9zdmc+)}', provide);
});}],
['3x', function (ym) {
ym.modules.define('listbox', ["system.provideCss"], function (provide, systemProvideCss) {
systemProvideCss('.ymaps-2-1-64-listbox__button{background-color:#fff;border-color:transparent;box-shadow:0 1px 2px 1px rgba(0,0,0,.15),0 2px 5px -3px rgba(0,0,0,.15)}.ymaps-2-1-64-listbox{position:relative;display:inline-block;height:28px;vertical-align:top;line-height:0}.ymaps-2-1-64-listbox__button{box-sizing:border-box!important;border-width:1px;border-style:solid;border-radius:3px;background-clip:border-box;color:#000;vertical-align:middle;text-decoration:none;font-family:Arial,Helvetica,sans-serif;cursor:pointer;-webkit-transition:background-color .15s ease-out,border-color .15s ease-out,opacity .15s ease-out;transition:background-color .15s ease-out,border-color .15s ease-out,opacity .15s ease-out;display:inline-block;text-align:left;height:28px;white-space:nowrap}a.ymaps-2-1-64-listbox__button,a.ymaps-2-1-64-listbox__button:active,a.ymaps-2-1-64-listbox__button:hover,a.ymaps-2-1-64-listbox__button:link,a.ymaps-2-1-64-listbox__button:visited{color:#000!important;text-decoration:none!important}.ymaps-2-1-64-listbox__button-text{display:inline-block;position:relative;border:none;text-decoration:none;white-space:nowrap;font-size:13px;line-height:26px}.ymaps-2-1-64-listbox__button.ymaps-2-1-64-_pressed,.ymaps-2-1-64-listbox__button:active{background-color:#f3f1ed}.ymaps-2-1-64-listbox__button.ymaps-2-1-64-_disabled{cursor:default;background-color:#ebebeb}.ymaps-2-1-64-_disabled .ymaps-2-1-64-listbox__button-icon,.ymaps-2-1-64-listbox__button.ymaps-2-1-64-_disabled .ymaps-2-1-64-listbox__button-text{opacity:.5}.ymaps-2-1-64-listbox__button-icon{display:inline-block;width:16px;height:16px;border:5px solid transparent;background-repeat:no-repeat;background-position:center;vertical-align:top}.ymaps-2-1-64-listbox__button-icon.ymaps-2-1-64-_icon_layers{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBmaWxsPSIjMzMzIiBkPSJNMjAgMTQuNWwzIDEuNS0xMCA1LTEwLTUgMy0xLjUgMS41Ljc1TDYgMTZsNyAzLjUgNy0zLjUtMS41LS43NSAxLjUtLjc1em0wIDAiLz48cGF0aCBmaWxsPSIjNEM0QzRDIiBkPSJNMjAgMTEuNWwzIDEuNS0xMCA1LTEwLTUgMy0xLjUgMS41Ljc1TDYgMTNsNyAzLjUgNy0zLjUtMS41LS43NSAxLjUtLjc1em0wIDAiLz48cGF0aCBmaWxsPSIjNjY2IiBkPSJNMTMgMTVsMTAtNS0xMC01LTEwIDUgMTAgNXptMC0xLjVsNy0zLjUtNy0zLjVMNiAxMGw3IDMuNXptMCAwIi8+PC9nPjwvc3ZnPg==)}.ymaps-2-1-64-listbox__button.ymaps-2-1-64-_hidden-icon .ymaps-2-1-64-listbox__button-icon,.ymaps-2-1-64-listbox__button.ymaps-2-1-64-_hidden-text .ymaps-2-1-64-listbox__button-text{display:none}.ymaps-2-1-64-listbox__button-text{padding:0 12px 0 4px}.ymaps-2-1-64-_hidden-icon .ymaps-2-1-64-listbox__button-text{padding-left:12px}.ymaps-2-1-64-_visible-arrow .ymaps-2-1-64-listbox__button-text{padding-right:23px}.ymaps-2-1-64-listbox__button-arrow{display:none;width:29px;height:28px;position:absolute;right:0;top:0;background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMSIgaGVpZ2h0PSI2Ij48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMC4zMSAwTDUuNSA0LjY3LjY5IDAgMCAuNjcgNS41IDYgMTEgLjY3eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+) center no-repeat;-webkit-transition:-webkit-transform .15s ease-out;transition:transform .15s ease-out;transition:transform .15s ease-out,-webkit-transform .15s ease-out}.ymaps-2-1-64-_visible-arrow .ymaps-2-1-64-listbox__button-arrow{display:inline-block}.ymaps-2-1-64-listbox_opened_yes .ymaps-2-1-64-listbox__button-arrow{-webkit-transform:rotate(-180deg);transform:rotate(-180deg)}.ymaps-2-1-64-listbox__panel{position:relative;z-index:1000;display:block;float:left;margin-top:7px;padding:3px 0;background:#fff;border:1px solid #e5e5e5;box-shadow:0 10px 20px -5px rgba(0,0,0,.2)!important}.ymaps-2-1-64-listbox_align_right .ymaps-2-1-64-listbox__panel{float:right}.ymaps-2-1-64-listbox_opened_no .ymaps-2-1-64-listbox__panel{margin-top:-9999px;box-shadow:none}.ymaps-2-1-64-listbox__panel_animation_hide{-webkit-animation:listbox__panel-hide .25s ease 0 1;animation:listbox__panel-hide .25s ease 0 1}.ymaps-2-1-64-listbox__panel_animation_show{-webkit-animation:listbox__panel-show .25s ease 0 1 forwards;animation:listbox__panel-show .25s ease 0 1 forwards}.ymaps-2-1-64-hide-scroll ::-webkit-scrollbar,.ymaps-2-1-64-hide-scroll::-webkit-scrollbar{width:0}@-webkit-keyframes listbox__panel-show{0%{opacity:0}to{opacity:1}}@keyframes listbox__panel-show{0%{opacity:0}to{opacity:1}}@-webkit-keyframes listbox__panel-hide{0%{opacity:1;margin-top:0}to{opacity:0;margin-top:0}}@keyframes listbox__panel-hide{0%{opacity:1;margin-top:0}to{opacity:0;margin-top:0}}.ymaps-2-1-64-listbox__list{display:block;overflow:auto;overflow-x:hidden;font-family:Arial,sans-serif}.ymaps-2-1-64-listbox__list_scrollable_yes{overflow-y:scroll;-webkit-overflow-scrolling:touch}.ymaps-2-1-64-listbox__list-separator{display:block;font:0/0 a;width:100%;height:1px;background-color:#e5e5e5;border-top:4px solid #fff;border-bottom:4px solid #fff}.ymaps-2-1-64-listbox__list-item{display:block;white-space:nowrap;cursor:pointer;overflow:hidden}.ymaps-2-1-64-listbox__list-item_disabled_yes{color:#999;cursor:default}.ymaps-2-1-64-listbox__list-item-text{box-sizing:border-box!important;overflow:hidden;padding-right:13px;padding-left:30px;max-width:250px;text-overflow:ellipsis;font-size:13px;line-height:28px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative}.ymaps-2-1-64-listbox__list-item:hover{background-color:#ffeba0}.ymaps-2-1-64-listbox__list-item_disabled_yes:hover{background-color:transparent}.ymaps-2-1-64-listbox__list-item_selected_yes .ymaps-2-1-64-listbox__list-item-text:before{content:\'\';position:absolute;top:0;left:0;bottom:0;width:38px;background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNSIgaGVpZ2h0PSIxNiI+PHBhdGggZD0iTTEzLjUxLjQ1TDUuNDcgMTIuNDhsLTMuNzYtNC4yTC42NyA5LjYxbDQuOTMgNS40NUwxNC43MiAxLjZ6Ii8+PC9zdmc+) 50% 50% no-repeat}.ymaps-2-1-64-listbox__list-item_selected_yes.ymaps-2-1-64-listbox__list-item_disabled_yes .ymaps-2-1-64-listbox__list-item-text:before{opacity:.6}', provide);
});}],
['2u', function (ym) {
ym.modules.define('listbox.layout.html', ["listbox","i-custom-scroll"], function (provide) {
provide([0,"<ymaps class=\"ymaps-2-1-64-listbox ymaps-2-1-64-listbox_opened_no\"><ymaps class=\"ymaps-2-1-64-listbox__button\" title=\"",2001,["data.title",[]],0,"\"><ymaps class=\"ymaps-2-1-64-listbox__button-icon\"></ymaps><ymaps class=\"ymaps-2-1-64-listbox__button-text\">",2001,["data.content",[]],0,"</ymaps><ymaps class=\"ymaps-2-1-64-listbox__button-arrow\"></ymaps></ymaps><ymaps class=\"ymaps-2-1-64-listbox__panel ymaps-2-1-64-i-custom-scroll\"><ymaps class=\"ymaps-2-1-64-listbox__list\"></ymaps></ymaps></ymaps>"]);
});}],
['2w', function (ym) {
ym.modules.define('listbox.layout.item.html', ["listbox","i-custom-scroll"], function (provide) {
provide([0,"<ymaps class=\"ymaps-2-1-64-listbox__list-item ymaps-2-1-64-listbox__list-item_selected_no\"><ymaps class=\"ymaps-2-1-64-listbox__list-item-text\">",2001,["data.content",[["raw",null]]],0,"</ymaps></ymaps>"]);
});}],
['2y', function (ym) {
ym.modules.define('listbox.layout.separator.html', ["listbox","i-custom-scroll"], function (provide) {
provide([0,"<ymaps class=\"ymaps-2-1-64-listbox__list-separator\"></ymaps>"]);
});}],
['4e', function (ym) {
ym.modules.define('scaleline', ["system.provideCss"], function (provide, systemProvideCss) {
systemProvideCss('.ymaps-2-1-64-scaleline{position:relative;display:inline-block;overflow:visible;text-align:center;top:13px}.ymaps-2-1-64-scaleline__label{position:relative;top:-6px;display:block;padding:0 4px;vertical-align:middle;white-space:nowrap;color:#333;border-radius:3px;font:11px/15px Verdana,Arial,sans-serif;background:rgba(255,255,255,.75)}.ymaps-2-1-64-scaleline__left,.ymaps-2-1-64-scaleline__right{display:table-cell;width:49%;vertical-align:top}.ymaps-2-1-64-scaleline__left-line,.ymaps-2-1-64-scaleline__right-line{display:block;height:1px;border-top:1px solid #fff;border-bottom:1px solid #fff;background:#000}.ymaps-2-1-64-scaleline__center{display:table-cell;height:1px}.ymaps-2-1-64-scaleline__left-border,.ymaps-2-1-64-scaleline__right-border{position:absolute;z-index:-1;top:-4px;width:1px;height:9px;border:1px solid #fff;background:#000}.ymaps-2-1-64-scaleline__left-border{left:-2px}.ymaps-2-1-64-scaleline__right-border{right:-2px}', provide);
});}],
['2O', function (ym) {
ym.modules.define('scaleline.layout.html', ["scaleline"], function (provide) {
provide([0,"<ymaps class=\"ymaps-2-1-64-scaleline\" ",2009,null,0,"width: ",2001,["data.width",[["raw",null]]],0,"; min-width: 59px",2010,null,0,"><ymaps class=\"ymaps-2-1-64-scaleline__left\"><ymaps class=\"ymaps-2-1-64-scaleline__left-border\"></ymaps><ymaps class=\"ymaps-2-1-64-scaleline__left-line\"></ymaps></ymaps><ymaps class=\"ymaps-2-1-64-scaleline__center\"><ymaps class=\"ymaps-2-1-64-scaleline__label\">",2001,["data.distance",[["raw",null]]],0,"</ymaps></ymaps><ymaps class=\"ymaps-2-1-64-scaleline__right\"><ymaps class=\"ymaps-2-1-64-scaleline__right-border\"></ymaps><ymaps class=\"ymaps-2-1-64-scaleline__right-line\"></ymaps></ymaps></ymaps>"]);
});}],
[':I', function (ym) {
ym.modules.define("theme.islands.control.layout.Fullscreen",["util.defineClass","theme.islands.control.layout.Button","layout.storage","Monitor"],function(t,e,s,l,a){var i=e(function(){i.superclass.constructor.apply(this,arguments)},s,{build:function(){i.superclass.build.call(this);var t=this.getData().state;this._applyView(t.get("fullscreen")),this._stateMonitor=new a(t).add("fullscreen",this._applyView,this),this.events.add("click",function(e){1==t.get("selected",!1)&&e.callMethod("preventDefault")},this)},clear:function(){this._stateMonitor.destroy(),i.superclass.clear.call(this)},_applyView:function(t){this.getData().data.set("iconType",t?"collapse":"expand")}});l.add("islands#fullscreenLayout",i),t(i)});}],
[':Z', function (ym) {
var PANEL_PADDING=60;ym.modules.define("theme.islands.control.layout.ListBox",["templateLayoutFactory","listbox.layout.html","layout.storage","util.dom.element","util.dom.reaction.hover","util.dom.reaction.hold","util.dom.className","util.dom.style","util.math.areEqual","Monitor","shape.Rectangle","geometry.pixel.Rectangle","layout.component.clientBounds","control.component.setupMarginManager","system.browser","util.css","util.array"],function(t,e,i,n,s,o,a,l,d,h,r,c,_,p,u,m,g,b){var x=["small","medium","large"],f=g.addPrefix("listbox_opened_yes"),y=g.addPrefix("listbox_opened_no"),E=g.addPrefix("listbox__panel_animation_show"),v=g.addPrefix("listbox__panel_animation_hide"),C={listbox:"listbox",listboxList:"listbox__list",listboxPanel:"listbox__panel",button:"listbox__button",buttonIcon:"listbox__button-icon",buttonText:"listbox__button-text",buttonIsPressed:g.addPrefix("_pressed"),buttonIsDisabled:g.addPrefix("_disabled"),buttonIconIsHidden:g.addPrefix("_hidden-icon"),buttonTextIsHidden:g.addPrefix("_hidden-text"),buttonArrowIsVisible:g.addPrefix("_visible-arrow"),buttonIconPrefix:g.addPrefix("_icon_"),listboxIsRightAligned:g.addPrefix("listbox_align_right"),listIsScrollable:g.addPrefix("listbox__list_scrollable_yes")},P=e.createClass(i,{build:function(){P.superclass.build.call(this);var t=this.getData(),e=t.control,i=this.getParentElement();this._childContainerElement=s.findByPrefixedClass(i,C.listboxList),this._fireChildContainerChange(null,this._childContainerElement),this._buttonElement=s.findByPrefixedClass(i,C.button),this._listBoxElement=s.findByPrefixedClass(i,C.listbox),this._listBoxPanelElement=s.findByPrefixedClass(i,C.listboxPanel),this._selectPopup=s.findByPrefixedClass(i,C.listboxPanel),this._buttonIconElement=s.findByPrefixedClass(i,C.buttonIcon),this._buttonTitleElement=s.findByPrefixedClass(i,C.buttonText),this._selectListElement=s.findByPrefixedClass(i,C.listboxList),d.patch(this._selectPopup,{transform:{use3D:!0}}),this._buttonAppearance=null,this._iconType=null,this._checkButtonAppearance(),this._applyEnabled(),this._alignRight=!1,this._expanded=!1,this._applyExpanded(),this._stateMonitor=new r(t.state).add("enabled",this._applyEnabled,this).add("expanded",this._applyExpanded,this).add("size",this._checkButtonAppearance,this),this._iconMonitor=new r(t.data).add(["iconType","image"],this._onIconChange,this),this._optionsMonitor=new r(t.options).add("popupFloat",this._applySide,this),this._childAddListener=e.events.group().add("layoutmapchange",this._onChildLayoutChange,this),this._parentAddListener=e.getParent().events.group().add(["shapechange"],this._onShapeChange,this),e.getMap().container.events.once("sizechange",function(t){h(t.get("oldSize"),[0,0])&&this._setupControlWidth()},this),u.add(this,function(){var t=this.getData(),e=t.options.get("maxWidth"),i=t.state.get("size"),n=b.indexOf(x,i);return[e[n],28]},this)},clear:function(){this._parentAddListener.removeAll(),this._childAddListener.removeAll(),this._expandMapEventsListeners&&this._expandMapEventsListeners.removeAll(),this._clearAnimationRemoveTimeout(),this.getData().state.get("enabled",!0)&&this._clearHoldReaction(),this._iconMonitor.destroy(),this._stateMonitor.destroy(),this._optionsMonitor.destroy();var t=this._childContainerElement;this._childContainerElement=null,this._fireChildContainerChange(t,null),u.remove(this),P.superclass.clear.call(this)},getShape:function(){return this.getElement()?new c(new _(p(this.getElement()))):null},getChildContainerElement:function(){return this._childContainerElement},_fireChildContainerChange:function(t,e){this.events.fire("childcontainerchange",{newChildContainerElement:e,oldChildContainerElement:t})},_applyEnabled:function(){this.getData().state.get("enabled",!0)?(this._setupHoldReaction(),l.remove(this._buttonElement,C.buttonIsDisabled)):(this._clearHoldReaction(),l.add(this._buttonElement,C.buttonIsDisabled))},_applyExpanded:function(){var t=this.getData().state.get("expanded",!1),e=this._listBoxElement,i=this._selectPopup;if(t!=this._expanded)if(this._expandMapEventsListeners?this._expandMapEventsListeners.removeAll():this._expandMapEventsListeners=this.getData().control.getMap().events.group(),this._expanded=t,t)this._applySide(),this._applyMaxHeight(),this._expandMapEventsListeners.add("sizechange",this._onMapSizeChange,this),l.has(e,y)&&(l.remove(e,y),l.remove(i,v),l.add(i,E),this._clearAnimationRemoveTimeout()),l.add(e,f);else{this._expandMapEventsListeners.removeAll();var n=!1;l.has(e,f)&&(l.remove(i,E),l.remove(e,f),n=!0),l.add(e,y),n&&(l.add(i,v),this._clearAnimationRemoveTimeout(),this._setAnimationRemoveTimeout(i,v))}},_setAnimationRemoveTimeout:function(t,e){function i(){l.remove(t,e)}this._animationRemoveTimeout=window.setTimeout(i,500)},_clearAnimationRemoveTimeout:function(){this._animationRemoveTimeout&&window.clearTimeout(this._animationRemoveTimeout)},_onMapSizeChange:function(){this._applySide(),this._applyMaxHeight()},_setupHoldReaction:function(){this.getData().state;this._holdReaction=a.reaction({element:this._buttonElement,targetElement:this._buttonElement,toggleCssClass:C.buttonIsPressed})},_clearHoldReaction:function(){this._holdReaction&&this._holdReaction.disable()},_onShapeChange:function(t){this._applySide()},_checkButtonAppearance:function(){var t=this._resolveAppearance();return t!=this._buttonAppearance&&(this._buttonAppearance&&this._clearAppearance(this._buttonAppearance),this._applyAppearance(t),this._buttonAppearance=t,!0)},_applyAppearance:function(t){switch(t){case"iconOnly":l.add(this._buttonElement,C.buttonTextIsHidden),this._applyIcon();break;case"contentOnly":l.add(this._buttonElement,C.buttonArrowIsVisible),l.add(this._buttonElement,C.buttonIconIsHidden);break;case"iconWithContent":l.add(this._buttonElement,C.buttonArrowIsVisible),this._applyIcon()}this._setupControlWidth()},_clearAppearance:function(t){switch(t){case"iconOnly":l.remove(this._buttonElement,C.buttonTextIsHidden);break;case"contentOnly":l.remove(this._buttonElement,C.buttonArrowIsVisible),l.remove(this._buttonElement,C.buttonIconIsHidden);break;case"iconWithContent":l.remove(this._buttonElement,C.buttonArrowIsVisible)}},_setupControlWidth:function(){var t=d.getSize(this._buttonElement,{includePadding:!0,includeBorder:!0})[0];d.css(this._listBoxElement,{width:t+"px"})},_applySide:function(){var t,e=this.getData().control,i=e.options.get("popupFloat"),n=e.options.get("float"),s=e.options.get("position");if("none"!=n&&!s||i)t="right"==(i||n);else{var o=this.getParentElement().getBoundingClientRect(),a=e.getMap(),d=a.container.getSize()[0];t=o.left>d/2}t?l.add(this._listBoxElement,C.listboxIsRightAligned):l.remove(this._listBoxElement,C.listboxIsRightAligned)},_applyMaxHeight:function(){d.css(this._selectListElement,{maxHeight:"999999px"}),l.remove(this._selectListElement,C.listIsScrollable);var t=this.getData().control.getMap(),e=d.getOffset(t.container.getElement(),!0)[1],i=d.getOffset(this.getParentElement(),!0)[1],n=this.getShape().getBounds(),s=i-e,o=t.container.getSize()[1]-s-n[1][1]-PANEL_PADDING,a=d.getSize(this._listBoxPanelElement)[1];a-1<o&&"Android"==m.osFamily?(l.has(this._listBoxPanelElement,g.addPrefix("hide-scroll"))||(l.add(this._listBoxPanelElement,g.addPrefix("hide-scroll")),l.remove(this._listBoxPanelElement,g.addPrefix("i-custom-scroll"))),this._setMaxHeightAndClass(this._selectListElement,a-1)):("Android"==m.osFamily&&(l.remove(this._listBoxPanelElement,g.addPrefix("hide-scroll")),l.add(this._listBoxPanelElement,g.addPrefix("i-custom-scroll"))),a>o?this._setMaxHeightAndClass(this._selectListElement,o):d.css(this._selectListElement,{maxHeight:o}))},_resolveAppearance:function(){var t=this.getData().state,e=this.getData().data,i=e.get("image")||e.get("iconType"),n=e.get("content"),s=t.get("size");return"small"==s&&i||!n?"iconOnly":"medium"==s&&n||!i?"contentOnly":"iconWithContent"},_onIconChange:function(){this._checkButtonAppearance()||this._applyIcon()},_applyIcon:function(){var t=this.getData().data,e=C.buttonIconPrefix;if(t.get("image"))this._iconType&&(l.remove(this._buttonIconElement,e+this._iconType),this._iconType=null),d.css(this._buttonIconElement,{backgroundImage:'url("'+t.get("image")+'")'});else{var i=t.get("iconType");this._iconType!=i&&(this._iconType&&l.remove(this._buttonIconElement,e+this._iconType),l.add(this._buttonIconElement,e+i),this._iconType=i)}},_onChildLayoutChange:function(){this._applySide(),this._applyMaxHeight()},_setMaxHeightAndClass:function(t,e){e=Math.max(0,e),d.css(t,{maxHeight:e+"px"}),l.add(t,C.listIsScrollable)}});n.add("islands#listBoxLayout",P),t(P)});}],
[';:', function (ym) {
ym.modules.define("theme.islands.control.layout.ListBoxItem",["templateLayoutFactory","layout.storage","theme.islands.control.layout.ListBoxSelectableItem","theme.islands.control.layout.ListBoxSeparatorItem"],function(t,e,o,a,s){var l=e.createClass('{% if options.type == "separator" %}{% include options.separatorLayout %}{% else %}{% include options.selectableLayout %}{% endif %}');o.add("islands#listBoxItemLayout",l),t(l)});}],
['@6', function (ym) {
ym.modules.define("theme.islands.control.layout.ListBoxSelectableItem",["templateLayoutFactory","listbox.layout.item.html","layout.storage","util.dom.element","util.dom.className","util.dom.style","Monitor","util.css"],function(e,t,l,i,s,a,d,_,m){var o=t.createClass(l,{build:function(){o.superclass.build.call(this),d.patch(this.getElement(),{selectable:!1}),this._itemElement=s.findByPrefixedClass(this.getParentElement(),"listbox__list-item"),this._applySelected(this.getData().state.get("selected")),this._applyEnabled(this.getData().state.get("enabled",!0)),this._stateMonitor=new _(this.getData().state).add("selected",this._applySelected,this).add("enabled",this._applyEnabled,this)},clear:function(){this._stateMonitor.removeAll(),o.superclass.clear.call(this)},_applySelected:function(e){e?(a.remove(this._itemElement,m.addPrefix("listbox__list-item_selected_no")),a.add(this._itemElement,m.addPrefix("listbox__list-item_selected_yes"))):(a.remove(this._itemElement,m.addPrefix("listbox__list-item_selected_yes")),a.add(this._itemElement,m.addPrefix("listbox__list-item_selected_no")))},_applyEnabled:function(e){e?a.remove(this._itemElement,m.addPrefix("listbox__list-item_disabled_yes")):a.add(this._itemElement,m.addPrefix("listbox__list-item_disabled_yes"))}});i.add("islands#listBoxItemSelectableLayout",o),e(o)});}],
['@7', function (ym) {
ym.modules.define("theme.islands.control.layout.ListBoxSeparatorItem",["templateLayoutFactory","listbox.layout.separator.html","layout.storage"],function(t,a,o,e){var l=a.createClass(o);e.add("islands#listBoxItemSeparatorLayout",l),t(l)});}],
[';b', function (ym) {
ym.modules.define("theme.islands.control.layout.Ruler",["templateLayoutFactory","layout.storage","layout.component.clientBounds","theme.islands.control.layout.ScaleLine","theme.islands.control.layout.Button","shape.Rectangle","geometry.pixel.Rectangle","domEvent.manager","control.component.setupMarginManager","util.dom.style","util.dom.element","system.browser"],function(e,t,l,s,n,i,a,o,r,u,c,d,y){var m=t.createClass("<ymaps {% style %}display: block;{% endstyle %}>{% if options.scaleLine == true %}<ymaps {% style %}display: inline-block; height: 100%; vertical-align: top;{% endstyle %}>{% include islands#scaleLine %}</ymaps><ymaps {% style %}display: inline-block; width: 10px; height: 0{% endstyle %}></ymaps>{% endif %}<ymaps {% style %}display: inline-block;{% endstyle %}>{% include islands#buttonLayout %}</ymaps></ymaps>",{build:function(){m.superclass.build.call(this),u.add(this,function(){return[125,28]},this);var e=d.findByPrefixedClass(this.getElement(),"float-button");this._layoutElementListeners=r.group(e).add("click",this._onButtonClick,this),y.isIE&&parseInt(y.version,10)<11&&c.css(e,{top:"3px"})},clear:function(){u.remove(this),this._layoutElementListeners.removeAll(),m.superclass.clear.call(this)},getShape:function(){var e=this.getElement();return e&&e.firstChild?new a(new o(s(e.firstChild))):null},_onButtonClick:function(){this.events.fire("rulerbuttonclick")}});l.add("islands#rulerLayout",m),e(m)});}],
[';J', function (ym) {
ym.modules.define("theme.islands.control.layout.ScaleLine",["templateLayoutFactory","scaleline.layout.html","layout.storage","layout.component.clientBounds","util.dom.element","formatter","shape.Rectangle","geometry.pixel.Rectangle","domEvent.manager"],function(t,e,i,a,s,n,l,o,c,r){var d=l.distance,h=e.createClass(i,{init:function(){this.update()},build:function(){h.superclass.build.call(this),this.listeners=this.getMap().events.group().add("actionend",this.update,this).add("typechange",this.update,this),this._scaleLineNode=n.findByPrefixedClass(this.getElement(),"scaleline")},clear:function(){this.listeners.removeAll(),h.superclass.clear.call(this)},getShape:function(){var t=this.getElement();return t&&this._scaleLineNode?new o(new c(s(t,this._scaleLineNode))):null},MIN_WIDTH:75,getMap:function(){return this.getData().control.getMap()},update:function(){var t=this._pixelsToDist(this.MIN_WIDTH),e=parseFloat(l.toSignificantDigits(t,1)),i=Math.abs(t)>1e-7?e*this.MIN_WIDTH/t:this.MIN_WIDTH;this.getData().data.set({distance:d(e,1),width:Math.round(i)+"px"})},_pixelsToDist:function(t){var e=this.getMap(),i=e.options.get("projection"),a=i.toGlobalPixels(e.getCenter(),e.getZoom()),s=i.fromGlobalPixels([a[0]-t/2,a[1]],e.getZoom()),n=i.fromGlobalPixels([a[0]+t/2,a[1]],e.getZoom());return i.getCoordSystem().getDistance(s,n)}});a.add("islands#scaleLine",h),t(h)});}],
[';c', function (ym) {
ym.modules.define("theme.islands.control.layout.Zoom",["templateLayoutFactory","zoom.layout.html","layout.storage","Monitor","domEvent.manager","util.dom.reaction.hover","util.dom.reaction.hold","util.dom.className","util.dom.element","util.dom.style","util.Dragger","util.array","shape.Rectangle","geometry.pixel.Rectangle","layout.component.clientBounds","util.css","control.component.setupMarginManager"],function(t,e,s,i,n,o,a,u,r,h,l,_,g,c,m,d,p,f){var R=210,v=150,z=15,B=z/2,b=B,Z=v-B,D=Z-b,P=60,M={plusButton:"zoom__plus",minusButton:"zoom__minus",runnerButton:"zoom__runner",scale:"zoom__scale",runnerButtonTransition:p.addPrefix("zoom__runner__transition"),buttonIsPressed:p.addPrefix("_pressed"),buttonIsDisabled:p.addPrefix("_disabled")},y=e.createClass(s,{build:function(){var t=this.getData().state,e=this.getParentElement(),s=this.getData().options.get("position");this._size=t.get("size"),this._offset=s?s.top||s.bottom||0:l.getOffset(e)[1],this._checkState(),this._sizeChanged=this._size!=t.get("size"),this._sizeChanged||(y.superclass.build.call(this),this._setupZoom(),f.add(this,function(){return[28,"large"!=this._size?61:R]},this))},getShape:function(){var t=this.getElement();return t?new c(new m(d(t))):null},_setupZoom:function(){var t=this.getParentElement(),e=this.getData();if(this._plusButton=h.findByPrefixedClass(t,M.plusButton),this._minusButton=h.findByPrefixedClass(t,M.minusButton),this._isPlusEnabled=!0,this._isMinusEnabled=!0,this._zoomReactions=null,this._setupZoomMonitors(),this._setupZoomEvents(),"large"==this._size){this._dragging=!1;var s=this._getZoomRange();this._zoomPoint=D/(s[1]-s[0]),this._scaleLine=h.findByPrefixedClass(t,M.scale),this._scaleRunner=h.findByPrefixedClass(t,M.runnerButton),r.add(this._scaleRunner,M.runnerButtonTransition),this._setupLargeZoomEvents(),this._setupDragger(),this._setRunnerPositionByZoom(e.state.get("zoom"))}this._setupZoomReactions(),this._applyView()},clear:function(){this._sizeChanged||(this._clearZoomMonitors(),this._clearZoomEvents(),this._clearZoomReactions(),"large"==this._size&&(this._clearLargeZoomEvents(),this._clearDragger()),f.remove(this),y.superclass.clear.call(this))},_setupZoomMonitors:function(){this._stateMonitor=new n(this.getData().state).add("zoom",this._onZoomChange,this).add("zoomRange",this._onZoomRangeChange,this).add("mapHeight",this._checkState,this),this._optionsMonitor=new n(this.getData().options).add("size",this._applyState,this)},_clearZoomMonitors:function(){this._stateMonitor.removeAll(),this._optionsMonitor.removeAll()},_setupZoomEvents:function(){this._plusButtonListener=o.group(this._plusButton).add("click",this._onPlusButtonClick,this),this._minusButtonListener=o.group(this._minusButton).add("click",this._onMinusButtonClick,this)},_clearZoomEvents:function(){this._plusButtonListener.removeAll(),this._minusButtonListener.removeAll()},_onPlusButtonClick:function(){if(this._isPlusEnabled){var t=this.getData().options.get("zoomStep");this._changeZoom(t)}},_onMinusButtonClick:function(){if(this._isMinusEnabled){var t=this.getData().options.get("zoomStep");this._changeZoom(-t)}},_setupZoomReactions:function(){this._zoomReactions={plus:[u.reaction({element:this._plusButton,toggleCssClass:M.buttonIsPressed})],minus:[u.reaction({element:this._minusButton,toggleCssClass:M.buttonIsPressed})]}},_clearZoomReactions:function(){this._disableReactions("plus"),this._disableReactions("minus")},_enableReactions:function(t){g.each(this._zoomReactions[t],function(t){t.enable()})},_disableReactions:function(t){g.each(this._zoomReactions[t],function(t){t.disable()})},_getZoomRange:function(){return this.getData().state.get("zoomRange")||[0,23]},_changeZoom:function(t){var e=this.getData().state,s=e.get("zoom"),i=s+t,n=this._getZoomRange();i=Math.max(n[0],Math.min(n[1],i)),Math.abs(i-s)>.01&&this.events.fire("zoomchange",{newZoom:i})},_checkState:function(){var t=this.getData().state.get("mapHeight"),e=this._offset+R+P;this._applyState(t<e?"small":"large")},_applyState:function(t){var e=this.getData().state,s=this.getData().options.get("size","auto");"auto"==s?"auto"!=t&&e.get("size")!=t&&e.set("size",t):e.set("size",s)},_applyView:function(){var t=this.getData().state,e=t.get("zoomRange"),s=t.get("zoom");this._isPlusEnabled=s<e[1],this._isPlusEnabled?(r.remove(this._plusButton,M.buttonIsDisabled),this._enableReactions("plus")):(r.add(this._plusButton,M.buttonIsDisabled),this._disableReactions("plus")),this._isMinusEnabled=s>e[0],this._isMinusEnabled?(r.remove(this._minusButton,M.buttonIsDisabled),this._enableReactions("minus")):(r.add(this._minusButton,M.buttonIsDisabled),this._disableReactions("minus"))},_setupLargeZoomEvents:function(){this._scaleLineListener=o.group(this._scaleLine).add("click",this._onScaleClick,this),this._scaleRunnerListener=o.group(this._scaleRunner).add("mousedown",this._onScaleRunnerMousedown,this).add("mouseup",this._onScaleRunnerMouseup,this)},_clearLargeZoomEvents:function(){this._scaleLineListener.removeAll(),this._scaleRunnerListener.removeAll()},_setupDragger:function(){this._dragger=new _({autoStartElement:this._scaleRunner}),this._draggerEvents=this._dragger.events.group().add("move",this._onDragMove,this).add("start",this._onDragStart,this).add("stop",this._onDragStop,this)},_clearDragger:function(){this._dragger.stop(),this._draggerEvents.removeAll()},_onZoomRangeChange:function(t){this._zoomPoint=D/(t[1]-t[0]);var e=this.getData().state;this._dragging||"large"!=e.get("size")||this._setRunnerPositionByZoom(e.get("zoom")),this._applyView()},_onZoomChange:function(t){this._dragging||"large"!=this.getData().state.get("size")||this._setRunnerPositionByZoom(t),this._applyView()},_getOffset:function(t){var e=t.get("position")[1],s=e-l.getOffset(this._scaleLine,!0)[1];return Math.max(b,Math.min(s,Z))},_onDragStart:function(){this._dragging=!0,r.remove(this._scaleRunner,M.runnerButtonTransition),this.events.fire("dragstart")},_onDragMove:function(t){var e=this._getOffset(t),s=this._getZoomRange(),i=this.getData().state.get("zoom"),n=(Z-e)/this._zoomPoint+s[0];this._setRunnerPositionByOffset(e),this._changeZoom(n-i)},_onDragStop:function(t){this._dragging=!1,r.add(this._scaleRunner,M.runnerButtonTransition),r.remove(this._scaleRunner,M.buttonIsPressed),this.events.fire("dragstop")},_onScaleClick:function(t){var e=this._getOffset(t),s=this._getZoomRange(),i=Math.round((Z-e)/this._zoomPoint)+s[0],n=i-this.getData().state.get("zoom");this._changeZoom(n)},_setRunnerPositionByZoom:function(t){var e=this._getZoomRange(),s=Z-Math.round((t-e[0])*this._zoomPoint);s=Math.max(b,Math.min(Z,s)),this._setRunnerPositionByOffset(s)},_setRunnerPositionByOffset:function(t){l.css(this._scaleRunner,{top:t-B+"px"})},_onScaleRunnerMousedown:function(){r.add(this._scaleRunner,M.buttonIsPressed)},_onScaleRunnerMouseup:function(){r.remove(this._scaleRunner,M.buttonIsPressed)}});i.add("islands#zoomLayout",y),t(y)});}],
['qo', function (ym) {
ym.modules.define("theme.islands.traffic.control.ActualForecastPopupContentComponent",["util.defineClass","Monitor","util.dom.element","traffic.provider.actual.timestampProvider","traffic.provider.forecast.timestampProvider","traffic.timeZone","localization.common.current","theme.islands.traffic.layout.control.PopupError","layout.storage"],function(t,e,o,a,r,i,s,n,u,h){var p=function(t,e,a){this._sliderElement=e,this._footerElement=a,this._popupLayout=t,this._popupErrorLayout=null,this._sliderLayoutCreated=!1,this._enabled=!1,this._checkProvider(),this._controlStateMonitor=new o(this._popupLayout.getData().controlState).add(["providerKey","trafficShown"],this._checkProvider,this),this._stateMonitor=new o(this._popupLayout.getData().state).add("actualProviderHasData",this._rebuildSliderLayout,this)};e(p,{destroy:function(){this._clearContent(),this._controlStateMonitor.destroy(),this._stateMonitor.destroy()},_setupContent:function(){this._optionsMonitor=new o(this._popupLayout.getData().options).add("popupFooterLayout",this._updateFooterLayout,this),this._footerLayout=this._createLayout("popupFooterLayout",this._footerElement),this._createProviderDataListeners(),this._setupSliderLayout()},_clearContent:function(){this._footerLayout&&(this._clearLayout(this._footerLayout),this._footerLayout=null),this._clearSliderLayout(),this._clearProviderDataListeners(),this._optionsMonitor&&this._optionsMonitor.destroy()},_checkProvider:function(){var t=this._popupLayout.getData().controlState,e=t.get("providerKey"),o=("traffic#actual"==e||"traffic#forecast"==e)&&t.get("trafficShown");!!o!=this._enabled&&(o?this._setupContent():this._clearContent(),this._enabled=o)},_updateFooterLayout:function(){this._footerLayout&&this._clearLayout(this._footerLayout),this._footerLayout=this._createLayout("popupFooterLayout",this._footerElement)},_setupSliderLayout:function(){this._sliderLayoutCreated=!0,this._isDataExists()?this._sliderLayout=this._createLayout("popupSliderLayout",this._sliderElement):(this._popupErrorLayout=new u(this._popupLayout.getData()),this._popupErrorLayout.setParentElement(this._sliderElement),a.html(a.findByPrefixedClass(this._sliderElement,"error-message__msg"),n.Traffic.noForecastHere))},_clearSliderLayout:function(){this._sliderLayoutCreated&&(this._sliderLayout?(this._clearLayout(this._sliderLayout),this._sliderLayout=null):this._popupErrorLayout.setParentElement(null),this._sliderLayoutCreated=!1)},_createProviderDataListeners:function(){var t=this._popupLayout.getData().control.getMap();this._actualTimestampProvider=r.get(t),this._forecastTimestampProvider=i.get(t),this._actualProviderListener=this._actualTimestampProvider.events.group().add("timestampchange",this._checkForecastEnabled,this),this._forecastProviderListener=this._forecastTimestampProvider.events.group().add("timestampchange",this._checkForecastEnabled,this);var e=this._popupLayout.getData().control;this._boundsChangeListener=t.events.group().add("boundschange",this._checkTimeZone,this),this._actualTimestampProvider.getCurrent()||this._actualTimestampProvider.get(),this._forecastTimestampProvider.getCurrent()||this._forecastTimestampProvider.get();var o=t.getCenter({useMapMargin:e.getProvider().options.get("useMapMargin",!0)});s.getCurrent(o,t.getZoom())||s.get(o,t.getZoom()).then(this._checkForecastEnabled,this._checkForecastEnabled,this)},_clearProviderDataListeners:function(){this._actualTimestampProvider=null,this._forecastTimestampProvider=null,this._actualProviderListener&&(this._actualProviderListener.removeAll(),this._forecastProviderListener.removeAll(),this._boundsChangeListener.removeAll())},_checkForecastEnabled:function(){if(this._actualTimestampProvider){var t=this._popupLayout.getData().state,e=this._popupLayout.getData().controlState.get("providerKey"),o=this._isDataExists();o!=t.get("actualProviderHasData",!1)&&(o||"traffic#forecast"!=e||this._popupLayout.events.fire("providerkeychange",{newProviderKey:"traffic#actual"}),t.set("actualProviderHasData",o))}},_checkTimeZone:function(){var t=this._popupLayout.getData().control,e=t.getMap(),o=e.getCenter({useMapMargin:t.getProvider().options.get("useMapMargin",!0)});s.get(o,e.getZoom()).then(this._checkForecastEnabled,this._checkForecastEnabled,this)},_isDataExists:function(){var t=this._popupLayout.getData().control,e=t.getMap(),o=e.getCenter({useMapMargin:t.getProvider().options.get("useMapMargin",!0)});return Boolean(this._actualTimestampProvider&&this._actualTimestampProvider.getCurrent())&&Boolean(this._forecastTimestampProvider&&this._forecastTimestampProvider.getCurrent())&&Boolean(s.getCurrent(o,e.getZoom()))},_createLayout:function(t,e){var o,a=this._popupLayout.getData(),r=a.controlState.get("providerKey"),i=a.control.getProvider(r),s=i.options.get(t);return"string"==typeof s&&(s=h.get(s)),s&&(o=new s(this._popupLayout.getData()),o.events.setParent(this._popupLayout.events),o.setParentElement(e)),o},_clearLayout:function(t){t.setParentElement(null),t.events.setParent(null),t.destroy()},_rebuildSliderLayout:function(){this._clearSliderLayout(),this._setupSliderLayout()}}),t(p)});}],
['@q', function (ym) {
ym.modules.define("theme.islands.traffic.control.ArchivePopupContentComponent",["util.defineClass","Monitor","util.dom.element","traffic.timeZone","localization.common.current","util.bind","domEvent.manager","theme.islands.traffic.layout.control.PopupError","layout.storage","util.css"],function(t,e,i,r,o,a,n,s,u,l,h){var c={link:"traffic__link"},_=a.Traffic.noStatisticsHere+'<br><ymaps class="'+h.addPrefix(c.link)+'">'+a.Traffic.seeCurrentTrafficJams+"</ymaps>",p=function(t,e,r,o){this._sliderElement=e,this._weekDaysElement=r,this._footerElement=o,this._popupLayout=t,this._popupErrorLayout=null,this._enabled=!1,this._checkProvider(),this._controlStateMonitor=new i(this._popupLayout.getData().controlState).add(["providerKey","trafficShown"],this._checkProvider,this)};e(p,{destroy:function(){this._clearContent(),this._controlStateMonitor.destroy()},_setupContent:function(){this._createProviderDataListeners(),this._setupSliderLayout()},_clearContent:function(){this._clearSliderLayout(),this._clearProviderDataListeners()},_checkProvider:function(){var t=this._popupLayout.getData().controlState,e=t.get("providerKey"),i="traffic#archive"==e&&t.get("trafficShown");i!=this._enabled&&(i?this._setupContent():this._clearContent(),this._enabled=i)},_setupSliderLayout:function(){this._archiveEnabled=this._isArchiveEnabledHere(),this._archiveEnabled?(this._sliderLayout=this._createLayout("popupSliderLayout",this._sliderElement),this._weekDaysLayout=this._createLayout("popupWeekDaysLayout",this._weekDaysElement),this._footerLayout=this._createLayout("popupFooterLayout",this._footerElement)):(this._popupErrorLayout=new u(this._popupLayout.getData()),this._popupErrorLayout.setParentElement(this._sliderElement),r.html(r.findByPrefixedClass(this._sliderElement,"error-message__msg"),_),this._linkElement=r.findByPrefixedClass(this._sliderElement,c.link),s.add(this._linkElement,"click",this._onCurrentTrafficClick,this))},_clearSliderLayout:function(){this._sliderLayout?(this._clearLayout(this._sliderLayout),this._clearLayout(this._weekDaysLayout),this._clearLayout(this._footerLayout),this._sliderLayout=null):this._linkElement&&(s.remove(this._linkElement,"click",this._onCurrentTrafficClick,this),this._popupErrorLayout.setParentElement(null))},_createProviderDataListeners:function(){var t=this._popupLayout.getData().control,e=t.getMap(),i=e.getCenter({useMapMargin:t.getProvider().options.get("useMapMargin",!0)});this._boundsChangeListener=e.events.group().add("boundschange",this._checkTimeZone,this),o.getCurrent(i,e.getZoom())||o.get(i,e.getZoom()).then(n(this._checkArchiveEnabled,this))},_clearProviderDataListeners:function(){this._boundsChangeListener&&this._boundsChangeListener.removeAll()},_checkArchiveEnabled:function(){var t=this._isArchiveEnabledHere();t!=this._archiveEnabled&&(this._rebuildSliderLayout(),this._archiveEnabled=t)},_checkTimeZone:function(){var t=this._popupLayout.getData().control,e=t.getMap(),i=e.getCenter({useMapMargin:t.getProvider().options.get("useMapMargin",!0)});o.get(i,e.getZoom()).then(this._checkArchiveEnabled,this._checkArchiveEnabled,this)},_isArchiveEnabledHere:function(){var t=this._popupLayout.getData().control,e=t.getMap(),i=e.getCenter({useMapMargin:t.getProvider().options.get("useMapMargin",!0)});return o.getCurrent(i,e.getZoom())},_createLayout:function(t,e){var i,r=this._popupLayout.getData().control.getProvider("traffic#archive"),o=r.options.get(t);return"string"==typeof o&&(o=l.get(o)),o&&(i=new o(this._popupLayout.getData()),i.events.setParent(this._popupLayout.events),i.setParentElement(e)),i},_clearLayout:function(t){t.setParentElement(null),t.events.setParent(null),t.destroy()},_rebuildSliderLayout:function(){this._clearSliderLayout(),this._setupSliderLayout()},_onCurrentTrafficClick:function(){this._popupLayout.events.fire("providerkeychange",{newProviderKey:"traffic#actual"})}}),t(p)});}],
[';0', function (ym) {
ym.modules.define("theme.islands.traffic.layout.Control",["templateLayoutFactory","layout.storage","traffic.layout.html","Monitor","data.Manager","option.Manager","util.dom.className","util.dom.element","shape.Rectangle","geometry.pixel.Rectangle","layout.component.clientBounds","control.component.setupMarginManager","system.browser","util.css","util.array","theme.islands.traffic.layout.control.Button","theme.islands.traffic.layout.control.Popup","theme.islands.traffic.layout.control.ArchiveButtonTitle","theme.islands.traffic.layout.control.ArchivePopupSlider","theme.islands.traffic.layout.control.ArchivePopupHint","theme.islands.traffic.layout.control.ArchivePopupWeekDays","theme.islands.traffic.layout.control.ActualButtonTitle","theme.islands.traffic.layout.control.ActualForecastPopupSlider","theme.islands.traffic.layout.control.ActualPopupServicesList","theme.islands.traffic.layout.control.ActualPopupEventsCheckbox","theme.islands.traffic.layout.control.ForecastButtonTitle"],function(t,e,a,i,n,r,s,o,l,c,d,h,f,u,p,_){var m="AndroidBrowser"!=u.name,g=["small","medium","large"],v=e.createClass(i,{init:function(){this.setData({state:new r,controlState:this.getData().state,control:this.getData().control,options:new s}),v.superclass.init.call(this)},build:function(){this._applyProvider(),v.superclass.build.call(this),this._trafficElement=l.findByPrefixedClass(this.getParentElement(),"traffic"),this._stateListener=new n(this.getData().controlState).add(["providerKey"],this._applyProvider,this).add(["expanded","size"],function(){this._checkExpanded()},this).add(["trafficShown"],function(){this._applyProvider(),this._checkExpanded()},this),this._expanded=!0,this._checkExpanded(!0),this._setupMapListener(),f.add(this,this._getScreenAreaCallback,this)},clear:function(){this._clearMapListener(),this._stateListener.destroy(),f.remove(this),v.superclass.clear.call(this),this._clearProvider()},getShape:function(){return this.getElement()?new c(new d(h(this.getElement()))):null},_applyProvider:function(){var t=this.getData().state,e=this.getData().controlState;e.get("trafficShown")?this._shown?(t.set("previousProviderKey",this._currentProviderKey),this._currentProviderKey=e.get("providerKey")):(this._shown=!0,this._currentProviderKey=e.get("providerKey")):(this._shown=!1,this._currentProviderKey=null);var a=null;this._currentProviderKey&&(a=this.getData().control.getProvider(this._currentProviderKey)),this.getData().options.setParent(a?a.options:null)},_clearProvider:function(){this.getData().options.setParent(null),this._currentProviderKey=null},_checkExpanded:function(t){var e=this.getData().controlState,a=e.get("trafficShown",!1),i=e.get("expanded",!1)&&a&&"small"!=e.get("size","large");if(i!=this._expanded){var n=l.findByPrefixedClass(this.getParentElement(),"traffic__panel");i?(m&&o.remove(n,p.addPrefix("traffic__panel-hide-animation")),o.add(this._trafficElement,p.addPrefix("traffic_settings_pressed")),m&&o.add(n,p.addPrefix("traffic__panel-show-animation"))):(m&&(o.remove(n,p.addPrefix("traffic__panel-show-animation")),!t&&a&&o.add(n,p.addPrefix("traffic__panel-hide-animation"))),o.remove(this._trafficElement,p.addPrefix("traffic_settings_pressed"))),this._expanded=i}},_setupMapListener:function(){m&&(this._mapListeners=this.getData().control.getMap().container.events.group().add(["fullscreenenter","fullscreenexit"],this._removeAnimationClass,this).add("sizechange",this._onMapSizeChange,this))},_clearMapListener:function(){m&&this._mapListeners.removeAll()},_onMapSizeChange:function(t){var e=t.get("newSize");0==e[0]&&0==e[1]&&this._removeAnimationClass()},_removeAnimationClass:function(){var t=l.findByPrefixedClass(this.getParentElement(),"traffic__panel");this._expanded||o.remove(t,p.addPrefix("traffic__panel-hide-animation"))},_getScreenAreaCallback:function(){var t=this.getData().control.options.get("maxWidth"),e=this.getData().control.state.get("size"),a=_.indexOf(g,e);return[t[a],28]}});a.add("islands#trafficControlLayout",v),t(v)});}],
['@8', function (ym) {
ym.modules.define("theme.islands.traffic.layout.control.ActualButtonTitle",["templateLayoutFactory","layout.storage","localization.common.current","formatter","Monitor","util.bind"],function(t,e,i,o,n,a,s){var l=e.createClass("{{localization.Traffic.jams}}",{build:function(){l.superclass.build.call(this),this._providerStateMonitor=new a(this.getData().control.getProvider().state).add(["isInited","level","localtime"],this._checkState,this),this._checkState()},clear:function(){this._clearContentTimeout(),this._providerStateMonitor.destroy(),l.superclass.clear.call(this)},_checkState:function(){var t="";if(this._providerStateMonitor.get("isInited")){var e=this._providerStateMonitor.get("level"),i=this._providerStateMonitor.get("localtime");t=null!=e?n.numeral(e,o.Traffic.points):o.Traffic.jams,i&&(t+=", "+i)}else t=o.Traffic.jams;this._updateContent(t)},_updateContent:function(t){this._content!=t&&(this._content=t,this._clearContentTimeout(),this._lastContentTimeout=window.setTimeout(s(this._setContent,this),100))},_setContent:function(){this.getElement().innerHTML=this._content,""!=this._content&&this.events.fire("sizechange")},_clearContentTimeout:function(){this._lastContentTimeout&&(window.clearTimeout(this._lastContentTimeout),this._lastContentTimeout=null)}});i.add("traffic#controlActualButtonTitleLayout",l),t(l)});}],
['qy', function (ym) {
var SLIDER_WIDTH=202,SLIDER_OFFSET=24,sliderLayout;ym.modules.define("theme.islands.traffic.layout.control.ActualForecastPopupSlider",["templateLayoutFactory","layout.storage","traffic.layout.settings.slider.html","localization.common.current","Monitor","util.dom.element","util.dom.style","util.dom.className","util.Dragger","util.math.cycleRestrict","domEvent.manager","data.Manager","util.css","theme.islands.traffic.layout.control.ActualSliderButtonContentProvider","theme.islands.traffic.layout.control.ForecastSliderButtonContentProvider","yandex.counter"],function(t,e,r,i,s,a,n,o,l,c,u,d,f,h,_,g,v){function p(t){return 3600-t%900}function m(t){return t.slice(0,1).toUpperCase()+t.slice(1)}function P(t){return u(t,0,604800)}function S(t){var e=T(t);return P(24*e.day*3600+3600*e.hours+60*e.minutes)}function T(t){var e=new Date(1e3*t),r=e.getUTCHours(),i=e.getUTCMinutes(),s=0==e.getUTCDay()?6:e.getUTCDay()-1;return{day:s,hours:r,minutes:i}}function D(t,e){var r=t-e;return Math.abs(r)>345600&&(r-=604800*(r>0?1:-1)),r}var y={sliderButton:"traffic__slider-button",sliderTrack:"traffic__slider-track",buttonIsPressed:h.addPrefix("_pressed")},F=e.createClass("",{build:function(){F.superclass.build.call(this),this.getSliderLayout().setParentElement(this.getParentElement()),this._setupLabels();var t=this.getSliderLayout().getElement();this._sliderTrackElement=n.findByPrefixedClass(t,y.sliderTrack),this._sliderButton=n.findByPrefixedClass(t,y.sliderButton),this._startClickListening(),this._currentDeltaX&&this._updateDeltaX(this._currentDeltaX),this._setupProvider(),this._controlStateMonitor=new a(this.getData().controlState).add("providerKey",this._onProviderChange,this),this._setupSliderButtonPressEvents(),this._setupDragger(),this._setupFullscreenListener()},clear:function(){this._clearFullscreenListener(),this._sliderTrackOffset=null,this._stopClickListening(),this._clearDragger(),this._clearProvider(),this._sliderButtonPressListener.removeAll(),this._controlStateMonitor.destroy();var t=this.getSliderLayout();t.setParentElement(null),t.destroy(),F.superclass.clear.call(this)},getSliderLayout:function(){if(!sliderLayout){var t=e.createClass(i);sliderLayout=new t({})}return sliderLayout},_setupSliderButtonPressEvents:function(){this._sliderButtonPressListener=d.group(this._sliderButton).add("mousedown",this._onSliderButtonMousedown,this).add("mouseup",this._onSliderButtonMouseup,this)},_applyNewSliderPosition:function(t){this._sliderTrackOffset||(this._sliderTrackOffset=o.getOffset(this._sliderTrackElement,!0));var e=t.get("position")[0]-(this._sliderTrackOffset[0]+SLIDER_OFFSET);if(e=Math.min(e,SLIDER_WIDTH),e=Math.max(e,0),this._updateDeltaX(e),0==e)"traffic#actual"!=this._currentProvider&&(this.events.fire("providerkeychange",{newProviderKey:"traffic#actual"}),this._unprocessedSliderTimeOffset=null);else{var r;if("traffic#actual"==this._currentProvider){var i=this._getActualStateField("timestamp");r=i?p(i):3600}else{var i=this._getForecastStateField("actualTimestamp");r=i?p(i):3600}if(this._unprocessedSliderTimeOffset=Math.round(r*e/SLIDER_WIDTH),"traffic#actual"==this._currentProvider)this.events.fire("providerkeychange",{newProviderKey:"traffic#forecast"});else{var s=this._getForecastTimeOffset();null!=s&&s!=this._currentTimeOffset&&(this._currentTimeOffset=s,this.getData().control.getProvider("traffic#forecast").state.set("timeOffset",s))}}},_getForecastTimeOffset:function(){var t=this._getForecastStateField("actualTimestamp"),e=this._getForecastStateField("timestamp");if(t&&e){var r=S(t+this._unprocessedSliderTimeOffset),i=r-e,s=900*Math.round(i/900);return s!=-900&&0!=i||(s=0),s<0&&(s+=604800),this._unprocessedSliderTimeOffset=null,s}return null},_checkSliderPosition:function(){null!=this._getForecastStateField("isInited")&&(null!=this._unprocessedSliderTimeOffset?this._applyForecastTimeOffset():this._isDragging||this._setupSliderPosition())},_setupSliderPosition:function(){var t=this._getForecastStateField("actualTimestamp"),e=this._getForecastStateField("forecastTimestamp");if(null!=t&&null!=e){var r=S(t),i=D(e,r),s=Math.min(i/p(r)*SLIDER_WIDTH,SLIDER_WIDTH);s=Math.max(s,0),this._updateDeltaX(s)}},_applyForecastTimeOffset:function(){var t=this.getData().control.getProvider("traffic#forecast"),e=this._getForecastTimeOffset();null!=e&&(this._currentTimeOffset=e,t.state.set("timeOffset",e))},_updateDeltaX:function(t){o.css(this._sliderButton,{left:t+"px"}),this._buttonTextProvider&&this._buttonTextProvider.getData().state.set("sliderDeltaX",t),this._currentDeltaX=t},_setupFullscreenListener:function(){this._fullscreenListener=this.getData().control.getMap().container.events.group().add(["fullscreenenter","fullscreenexit"],this._onFullscreenChange,this)},_clearFullscreenListener:function(){this._fullscreenListener.removeAll()},_onFullscreenChange:function(){this._sliderTrackOffset=null},_setupLabels:function(){var t=n.findByPrefixedClass(this.getParentElement(),"traffic__slider-label_type_left"),e=n.findByPrefixedClass(this.getParentElement(),"traffic__slider-label_type_right");t.innerHTML=m(s.Traffic.now),e.innerHTML=m(s.Traffic.inAnHour)},_getForecastStateField:function(t){return this.getData().control.getProvider("traffic#forecast").state.get(t)},_getActualStateField:function(t){return this.getData().control.getProvider("traffic#actual").state.get(t)},_startClickListening:function(){d.add(this._sliderTrackElement,"click",this._onSliderTrackClick,this)},_stopClickListening:function(){d.remove(this._sliderTrackElement,"click",this._onSliderTrackClick,this)},_onSliderTrackClick:function(t){this._applyNewSliderPosition(t)},_setupProvider:function(){this._currentProvider=this.getData().controlState.get("providerKey"),"traffic#actual"==this._currentProvider?this._setupActualProvider():this._setupForecastProvider(),this._createSliderButtonTextProvider()},_clearProvider:function(){this._clearSliderButtonTextProvider(),"traffic#actual"==this._currentProvider?this._clearActualProvider():this._clearForecastProvider(),this._currentProvider=null},_onProviderChange:function(){this._clearProvider(),this._setupProvider()},_setupActualProvider:function(){this._currentProvider="traffic#actual"},_clearActualProvider:function(){},_setupForecastProvider:function(){this._providerStateMonitor=new a(this.getData().control.getProvider("traffic#forecast").state).add(["actualTimestamp","forecastTimestamp","isInited"],this._checkSliderPosition,this),this._currentProvider="traffic#foreast",this._checkSliderPosition()},_clearForecastProvider:function(){this._providerStateMonitor.destroy()},_setupDragger:function(){this._dragger=new c({autoStartElement:this._sliderButton}),this._draggerListener=this._dragger.events.group().add("start",this._onDragStart,this).add("move",this._onDragMove,this).add("stop",this._onDragStop,this)},_clearDragger:function(){this._draggerListener.removeAll(),this._dragger.destroy()},_onDragStart:function(){this._isDragging=!0},_onDragMove:function(t){this._applyNewSliderPosition(t)},_onDragStop:function(){this._isDragging=!1,this._checkSliderPosition(),l.remove(this._sliderButton,y.buttonIsPressed)},_createSliderButtonTextProvider:function(){var t=n.findByPrefixedClass(this.getSliderLayout().getElement(),"button__text"),e="traffic#actual"==this._currentProvider?_:g;this._buttonTextProvider=new e(t,{state:new f({sliderDeltaX:this._currentDeltaX}),control:this.getData().control,options:this.getData().options})},_clearSliderButtonTextProvider:function(){this._buttonTextProvider.destroy()},_onSliderButtonMousedown:function(){l.add(this._sliderButton,y.buttonIsPressed)},_onSliderButtonMouseup:function(){l.remove(this._sliderButton,y.buttonIsPressed)}});r.add("traffic#controlActualForecastPopupSliderLayout",F),t(F)});}],
['ql', function (ym) {
function capitalize(t){return t.slice(0,1).toUpperCase()+t.slice(1)}ym.modules.define("theme.islands.traffic.layout.control.ActualPopupEventsCheckbox",["templateLayoutFactory","domEvent.manager","util.dom.element","util.dom.className","util.dom.style","Monitor","layout.storage","traffic.layout.settings.checkbox.html","util.css","yandex.counter"],function(t,e,i,s,o,n,a,c,h,r,l){var d={checkbox:"check",checkboxControl:"check__control"},_=e.createClass(h,{build:function(){_.superclass.build.call(this),this._topElement=s.findByPrefixedClass(this.getParentElement(),d.checkbox),this._boxControlElement=s.findByPrefixedClass(this.getParentElement(),d.checkboxControl),this._enabled=!0,this._checkEnabled(),this._checkVisibility(),this._applyChecked(),this._controlStateMonitor=new a(this.getData().controlState).add("providerKey",this._checkEnabled,this),this._stateMonitor=new a(this.getData().state).add("actualProviderHasData",this._checkVisibility,this),this._enabled&&this._checkState()},clear:function(){this._controlStateMonitor.destroy(),this._stateMonitor.destroy(),this._enabled&&this._stopListening(),_.superclass.clear.call(this)},_checkVisibility:function(){n.css(this._topElement,{display:this.getData().state.get("actualProviderHasData",!1)?void 0:"none"})},_checkEnabled:function(){"traffic#actual"!=this.getData().control.state.get("providerKey")?(this._isListening&&this._stopListening(),this._enabled=!1,n.attr(this._boxControlElement,{disabled:"disabled"})):(this._boxControlElement.removeAttribute("disabled"),this._enabled=!0,this._isListening||this._startListening())},_applyChecked:function(){this.getData().state.get("infoLayerCheckboxChecked")&&(this._currentChecked=!0,n.attr(this._boxControlElement,{checked:"checked"}))},_checkState:function(){var t=this.getData().control.getProvider().state.get("infoLayerShown");t!=this._currentChecked&&(this._currentChecked=t,t?(n.attr(this._boxControlElement,{checked:"checked"}),this.getData().state.set("infoLayerCheckboxChecked",!0)):(this.getData().state.set("infoLayerCheckboxChecked",!1),this._boxControlElement.removeAttribute("checked")))},_onClick:function(){var t=this.getData().control.getProvider().state,e=t.get("infoLayerShown",!1),i=!e;t.set("infoLayerShown",i),i&&l.countByKey("control","traffic.infoLayerOn")},_startListening:function(){i.add(this._topElement,"click",this._onClick,this),this._providerStateMonitor=new a(this.getData().control.getProvider().state).add("infoLayerShown",this._checkState,this),this._isListening=!0},_stopListening:function(){this._isListening=!1,this._providerStateMonitor.destroy(),i.remove(this._topElement,"click",this._onClick,this)}});c.add("traffic#eventsLayout",_),t(_)});}],
['@@', function (ym) {
ym.modules.define("theme.islands.traffic.layout.control.ActualPopupServicesList",["templateLayoutFactory","util.dom.element","layout.storage","option.presetStorage"],function(e,t,r,s,a){var i=t.createClass("",{build:function(){i.superclass.build.call(this),this._createServiceItems()},clear:function(){this._clearServiceItems(),i.superclass.clear.call(this)},_createServiceItems:function(){var e=this.getData().control.options,t=e.get("services",["traffic#eventsLayout"]);this._services=[];for(var a=0,i=t.length;a<i;a++){var c=t[a];"string"==typeof c&&(c=s.get(c));var l=new c(this.getData()),n=r.create({parentNode:this.getParentElement()});this._services[a]=l,l.setParentElement(n)}},_clearServiceItems:function(){for(var e=0,t=this._services.length;e<t;e++){var s=this._services[e],a=s.getParentElement();s.setParentElement(null),r.remove(a),s.destroy()}}});s.add("traffic#controlActualPopupServicesLayout",i),e(i)});}],
['qm', function (ym) {
ym.modules.define("theme.islands.traffic.layout.control.ActualSliderButtonContentProvider",["util.defineClass","Monitor","vow","util.bind","traffic.timeZone","util.cancelableCallback","util.dom.element"],function(t,e,i,s,a,r,l,o){function n(t){return t<10?"0"+t.toString():t}function c(t){var e=new Date(1e3*t),i=e.getUTCHours(),s=e.getUTCMinutes(),a=0==e.getUTCDay()?6:e.getUTCDay()-1;return{day:a,hours:i,minutes:s}}var h=function(t,e){this._data=e,this._element=t,this._provider=e.control.getProvider("traffic#actual"),this._timestamp=null,this._localtime=null,this._lastDeferred=null,this._updateLocalime(),this._providerStateMonitor=new i(this._provider.state).add(["timestamp","localtime"],this._updateLocalime,this)};e(h,{destroy:function(){this._clearLastPromise(),this._clearLastTimeRequest(),this._providerStateMonitor.destroy()},getData:function(){return this._data},_setButtonText:function(t){o.html(this._element,t)},_updateLocalime:function(){this._clearLastPromise(),this._clearLastTimeRequest(),this._lastDeferred=this._getLocaltimeText(),this._lastDeferred.promise().then(a(function(t){this._lastDeferred&&(this._setButtonText(t),this._lastDeferred=null)},this))},_getLocaltimeText:function(){var t=s.defer(),e=this._provider.state.get("localtime"),i=this._provider.state.get("timestamp"),a="";if(e&&e!=this._localtime)this._localtime=e,t.resolve(e);else if(i&&this._timestamp!=i){this._timestamp=i;var o=this._provider.getMap();this._lastCallback=l.create(function(e){var s=c(i+e.offset);a=n(s.hours)+":"+n(s.minutes),t.resolve(a)},this),r.get(o.getCenter({useMapMargin:this._provider.options.get("useMapMargin",!0)}),o.getZoom()).then(this._lastCallback)}else t.reject();return t},_clearLastPromise:function(){this._lastDeferred&&(this._lastDeferred.reject(),this._lastDeferred=null)},_clearLastTimeRequest:function(){this._lastCallback&&(this._lastCallback.cancel(),this._lastCallback=null)}}),t(h)});}],
['@9', function (ym) {
ym.modules.define("theme.islands.traffic.layout.control.ArchiveButtonTitle",["templateLayoutFactory","layout.storage","Monitor","localization.common.current","traffic.weekDays","formatter","util.bind"],function(t,e,i,n,o,a,s,r){function c(t){return"on"+t.slice(0,1).toUpperCase()+t.slice(1)}function l(t){return t<10?"0"+t.toString():t}var u=e.createClass("{{localization.Traffic.jams}}",{build:function(){u.superclass.build.call(this),this._providerStateMonitor=new n(this.getData().control.getProvider().state).add(["isInited","level","timestamp","timeZone","dst"],this._checkState,this),this._checkState()},clear:function(){this._clearContentTimeout(),this._providerStateMonitor.destroy(),u.superclass.clear.call(this)},_checkState:function(){var t="";if(this._providerStateMonitor.get("isInited")){var e=this._providerStateMonitor.get("level"),i=this.getData().control.getProvider().getTime();t=null!=e?s.numeral(e,o.Traffic.points):o.Traffic.jams,i&&(t+=" "+o.DaysOfWeek[c(i.dayOfWeek)],t+=", "+l(i.hours)+":"+l(i.minutes))}else t=o.Traffic.jams;this._updateContent(t)},_updateContent:function(t){function e(){this.getElement().innerHTML=t,""!=t&&this.events.fire("sizechange")}this._content!=t&&(this._content=t,this._clearContentTimeout(),this._lastContentTimeout=window.setTimeout(r(e,this),100))},_clearContentTimeout:function(){this._lastContentTimeout&&(window.clearTimeout(this._lastContentTimeout),this._lastContentTimeout=null)}});i.add("traffic#controlArchiveButtonTitleLayout",u),t(u)});}],
['@j', function (ym) {
ym.modules.define("theme.islands.traffic.layout.control.ArchivePopupHint",["templateLayoutFactory","layout.storage","traffic.layout.settings.hint.html","domEvent.manager","util.dom.element"],function(t,e,l,i,s,o){var c=e.createClass(i,{build:function(){c.superclass.build.call(this),this._closeElement=o.findByPrefixedClass(this.getParentElement(),"traffic__hint-close"),this._closeElement&&s.add(this._closeElement,"click",this._onCloseClick,this)},clear:function(){this._closeElement&&s.remove(this._closeElement,"click",this._onCloseClick,this),c.superclass.clear.call(this)},_onCloseClick:function(){this.getData().state.set("popupHintClosed",!0)}});l.add("traffic#controlArchivePopupHintLayout",c),t(c)});}],
['qn', function (ym) {
var SLIDER_WIDTH=202,SLIDER_OFFSET=24;ym.modules.define("theme.islands.traffic.layout.control.ArchivePopupSlider",["templateLayoutFactory","layout.storage","traffic.layout.settings.slider.html","util.Dragger","util.dom.element","util.dom.style","util.dom.className","Monitor","domEvent.manager","data.Manager","util.css","util.cancelableCallback","theme.islands.traffic.layout.control.ArchiveSliderButtonContent"],function(t,e,i,s,r,n,l,o,a,u,d,c,h,_){function f(t,e){return t==e||!(!t||!e||t.minutes!=e.minutes||t.hours!=e.hours)}var g={sliderButton:"traffic__slider-button",sliderTrack:"traffic__slider-track",buttonIsPressed:c.addPrefix("_pressed")},m=e.createClass(s,{build:function(){m.superclass.build.call(this),this._setupLabels(),this._sliderButton=n.findByPrefixedClass(this.getElement(),g.sliderButton),this._sliderTrackElement=n.findByPrefixedClass(this.getElement(),g.sliderTrack),this._provider=this.getData().control.getProvider("traffic#archive"),this._createSliderButtonTextLayout(),u.add(this._sliderTrackElement,"click",this._onSliderTrackClick,this),this._setupSliderButtonPressEvents(),this._setupDragger(),this._checkTime(),this._providerStateMonitor=new a(this.getData().control.getProvider().state).add(["timeZone","timestamp","dst"],this._checkTime,this),this._setupFullscreenListener()},clear:function(){this._clearFullscreenListener(),this._sliderTrackOffset=null,this._clearSliderButtonTextLayout(),u.remove(this._sliderTrackElement,"click",this._onSliderTrackClick,this),this._providerStateMonitor.destroy(),this._clearDragger(),this._sliderButtonPressListener.removeAll(),this._currentTimeOffset=null,m.superclass.clear.call(this)},_setupSliderButtonPressEvents:function(){this._sliderButtonPressListener=u.group(this._sliderButton).add("mousedown",this._onSliderButtonMousedown,this).add("mouseup",this._onSliderButtonMouseup,this)},_checkTime:function(){if(!this._dragger.isDragging()){var t=this.getData().control.getProvider(),e="function"==typeof t.getTime?t.getTime():null;null!=e&&(f(this._currentTime,e)||(this._applyProviderTime(e),this._setSliderPosition(e)))}},_applyProviderTime:function(t){this.getData().control.getProvider().setTime(t)},_getTime:function(t){var e=1425*t/SLIDER_WIDTH,i=Math.floor(e/60),s=e-60*i;15*Math.round(s/15);return(i>23||i>22&&s>45)&&(i=23,s=45),{hours:i,minutes:s}},_setSliderPosition:function(t){var e=60*t.hours+t.minutes,i=SLIDER_WIDTH*e/1425;l.css(this._sliderButton,{left:i+"px"}),this._updateDeltaX(i)},_applyNewSliderPosition:function(t){this._sliderTrackOffset||(this._sliderTrackOffset=l.getOffset(this._sliderTrackElement,!0));var e=t.get("position")[0]-(this._sliderTrackOffset[0]+SLIDER_OFFSET);l.value(this._sliderButton,"left");e=Math.min(e,SLIDER_WIDTH),e=Math.max(e,0),l.css(this._sliderButton,{left:e+"px"}),this._updateDeltaX(e),this._deltaX=e,this._applyProviderTimeCallback||(this._applyProviderTimeCallback=h.create(function(){this._applyProviderTimeCallback=null;var t=this._getTime(this._deltaX);this._applyProviderTime(t),this._dragger.isDragging()||this._checkTime()},this),window.setTimeout(this._applyProviderTimeCallback,200))},_onSliderTrackClick:function(t){this._applyNewSliderPosition(t)},_updateDeltaX:function(t){this._buttonTextLayout&&this._buttonTextLayout.getData().state.set("sliderDeltaX",t)},_setupFullscreenListener:function(){this._fullscreenListener=this.getData().control.getMap().container.events.group().add(["fullscreenenter","fullscreenexit"],this._onFullscreenChange,this)},_clearFullscreenListener:function(){this._fullscreenListener.removeAll()},_onFullscreenChange:function(){this._sliderTrackOffset=null},_setupLabels:function(){var t=n.findByPrefixedClass(this.getElement(),"traffic__slider-label_type_left"),e=n.findByPrefixedClass(this.getElement(),"traffic__slider-label_type_right");t.innerHTML="00:00",e.innerHTML="23:59"},_setupDragger:function(){this._dragger=new r({autoStartElement:this._sliderButton}),this._draggerListener=this._dragger.events.group().add("move",this._onDragMove,this).add("stop",this._onDragStop,this)},_clearDragger:function(){this._draggerListener.removeAll(),this._dragger.destroy()},_onDragMove:function(t){this._applyNewSliderPosition(t)},_onDragStop:function(t){this._applyProviderTimeCallback||this._checkTime(),o.remove(this._sliderButton,g.buttonIsPressed)},_createSliderButtonTextLayout:function(){var t=n.findByPrefixedClass(this.getElement(),"button__text");this._buttonTextLayout=new _({state:new d,control:this.getData().control,options:this.getData().options}),this._buttonTextLayout.setParentElement(t)},_clearSliderButtonTextLayout:function(){this._buttonTextLayout.setParentElement(null),this._buttonTextLayout.destroy()},_onSliderButtonMousedown:function(){o.add(this._sliderButton,g.buttonIsPressed)},_onSliderButtonMouseup:function(){o.remove(this._sliderButton,g.buttonIsPressed)}});i.add("traffic#controlArchivePopupSliderLayout",m),t(m)});}],
['@i', function (ym) {
ym.modules.define("theme.islands.traffic.layout.control.ArchivePopupWeekDays",["templateLayoutFactory","layout.storage","traffic.layout.settings.tabs.html","util.dom.element","util.dom.className","Monitor","domEvent.manager","localization.common.current","traffic.weekDays","util.bind","util.css"],function(e,t,a,r,s,i,o,c,n,l,f,p){function y(e){if(e instanceof Array)for(var t=0,a=e.length;t<a;t++){var r=e[t];"string"==typeof r&&(e[t]=r.replace("%mon",n.DaysOfWeek.mon.toUpperCase()).replace("%tue",n.DaysOfWeek.tue.toUpperCase()).replace("%wed",n.DaysOfWeek.wed.toUpperCase()).replace("%thu",n.DaysOfWeek.thu.toUpperCase()).replace("%fri",n.DaysOfWeek.fri.toUpperCase()).replace("%sat",n.DaysOfWeek.sat.toUpperCase()).replace("%sun",n.DaysOfWeek.sun.toUpperCase()))}else e=e.replace("%mon",n.DaysOfWeek.mon.toUpperCase()).replace("%tue",n.DaysOfWeek.tue.toUpperCase()).replace("%wed",n.DaysOfWeek.wed.toUpperCase()).replace("%thu",n.DaysOfWeek.thu.toUpperCase()).replace("%fri",n.DaysOfWeek.fri.toUpperCase()).replace("%sat",n.DaysOfWeek.sat.toUpperCase()).replace("%sun",n.DaysOfWeek.sun.toUpperCase());return e}var u=t.createClass(y(r),{build:function(){u.superclass.build.call(this),this._weekDays=s.findByPrefixedClass(this.getParentElement(),"traffic__tab",!0),this._checkDay(),this._providerStateMonitor=new o(this.getData().control.getProvider().state).add(["timeZone","dst","timestamp"],this._checkDay,this),this._weekDayListeners=[];for(var e=0,t=this._weekDays.length;e<t;e++)this._weekDayListeners[e]=c.group(this._weekDays[e]).add("click",this._createTabClickHandler(e),this)},clear:function(){for(var e=0,t=this._weekDayListeners.length;e<t;e++)this._weekDayListeners[e].removeAll();this._providerStateMonitor.destroy(),u.superclass.clear.call(this)},_checkDay:function(){var e=this.getData().control.getProvider(),t="function"==typeof e.getTime?e.getTime():null;if(t){var a=t.dayOfWeek;a!=this._currentDayOfWeek&&(this._currentDayOfWeek&&this._clearTime(this._currentDayOfWeek),this._currentDayOfWeek=a,this._applyTime(a))}},_createTabClickHandler:function(e){return f(function(){var t=l.numberToAbbr(e);t!=this._currentDayOfWeek&&this.getData().control.getProvider().setTime({dayOfWeek:t})},this)},_applyTime:function(e){var t=l.abbrToNumber(e);i.add(this._weekDays[t],p.addPrefix("traffic__tab_selected_yes"))},_clearTime:function(e){var t=l.abbrToNumber(e);i.remove(this._weekDays[t],p.addPrefix("traffic__tab_selected_yes"))}});a.add("traffic#controlArchivePopupWeekDaysLayout",u),e(u)});}],
['qw', function (ym) {
var SLIDER_WIDTH=202;ym.modules.define("theme.islands.traffic.layout.control.ArchiveSliderButtonContent",["templateLayoutFactory","layout.storage","Monitor"],function(t,e,a,i){function r(t){return t<10?"0"+t.toString():t}var l=e.createClass("",{build:function(){l.superclass.build.call(this),this._updateSliderLabel(),this._stateMonitor=new i(this.getData().state).add("sliderDeltaX",this._updateSliderLabel,this)},clear:function(){this._stateMonitor.destroy(),l.superclass.clear.call(this)},_updateSliderLabel:function(){var t=this.getData().state.get("sliderDeltaX");if(null!=t){var e=15*Math.round(t/SLIDER_WIDTH*1425/15),a=Math.floor(e/60),i=e-60*a;23==a?i=Math.min(i,45):a>23&&(a=23,i=45),this.getParentElement().innerHTML=r(a)+":"+r(i)}}});a.add("traffic#controlArchiveSliderButtonContentLayout",l),t(l)});}],
['@$', function (ym) {
ym.modules.define("theme.islands.traffic.layout.control.Button",["templateLayoutFactory","traffic.layout.button.html","util.dom.style","util.dom.className","util.dom.element","util.dom.reaction.hold","util.math.areEqual","layout.storage","theme.islands.traffic.layout.control.SettingsButton","Monitor","domEvent.manager","event.Mapper","layout.SubLayoutEventMappingTable","util.bind","util.nodeSize","util.css","yandex.counter"],function(t,e,n,i,o,a,s,c,h,r,u,l,d,_,f,m,y,S){var b={buttonLeft:"float-button_traffic_left",buttonPinLeftState:"_pin_left",buttonCheckedState:"_checked",buttonIcon:"float-button-icon",buttonText:"float-button-text",trafficIconMod:"traffic__icon_icon_",buttonAnimation:"button_traffic_left_animation",buttonTextIsHidden:"_hidden-text"},g=e.createClass("{% if !controlState.trafficShown || !options.buttonTitleLayout %}{{localization.Traffic.jams}}{% else %}{% include options.buttonTitleLayout %}{% endif %}"),p=e.createClass('{% if controlState.trafficShown && controlState.size != "small" %}{% include traffic#controlSettingsButtonLayout %}{% endif %}'),v=e.createClass(n,{build:function(){v.superclass.build.call(this);var t=this.getParentElement();i.patch(t,{selectable:!1}),this._buttonElement=a.findByPrefixedClass(t,b.buttonLeft),this._buttonIconElement=a.findByPrefixedClass(this._buttonElement,b.buttonIcon),this._createButtonContentLayout(),this._createSettingsButtonLayout(),this._buttonAppearance="iconWithText",this._checkButtonAppearance(),this._iconStyle="off",this._checkIconStyle(),this._selected=!1,this._checkSelected(),this._controlStateMonitor=new u(this.getData().controlState).add("size",this._checkButtonAppearance,this).add("trafficShown",this._onTrafficShownChange,this).add("providerKey",this._onProviderKeyChange,this),this._createProviderStateMonitor(),this._setupEvents()},clear:function(){this._clearWidthTimeout(),this._clearButtonContentLayout(),this._clearSettingsButtonLayout(),this._clearEvents(),this._clearProviderStateMonitor(),this._controlStateMonitor.destroy(),this._providerStateMonitor.destroy(),v.superclass.clear.call(this)},_onProviderKeyChange:function(){this._clearProviderStateMonitor(),this._createProviderStateMonitor()},_createProviderStateMonitor:function(){this._providerStateMonitor=new u(this.getData().control.getProvider().state).add("iconStyle",this._checkIconStyle,this)},_clearProviderStateMonitor:function(){this._providerStateMonitor.destroy()},_setupEvents:function(){l.add(this._buttonElement,"click",this._onButtonClick,this),this.getData().control.getMap().container.events.once("sizechange",function(t){c(t.get("oldSize"),[0,0])&&this._updateWidth()},this)},_checkIconStyle:function(){var t,e=this.getData().control,n=e.state.get("trafficShown");t=n?this.getData().control.getProvider().state.get("iconStyle")||"off":"off",t!=this._iconStyle&&(o.remove(this._buttonIconElement,y.addPrefix(b.trafficIconMod)+this._iconStyle),o.add(this._buttonIconElement,y.addPrefix(b.trafficIconMod)+t),this._iconStyle=t)},_clearEvents:function(){l.remove(this._buttonElement,"click",this._onButtonClick,this)},_applyAppearance:function(t){"iconOnly"==t&&(o.add(this._buttonElement,y.addPrefix(b.buttonTextIsHidden)),this._removeWidth())},_clearAppearance:function(t){"iconOnly"==t&&o.remove(this._buttonElement,y.addPrefix(b.buttonTextIsHidden))},_onButtonClick:function(){this.getData().controlState.get("trafficShown")?(this.events.fire("hidetraffic"),this.events.fire("deselect")):(this.events.fire("select"),this.events.fire("showtraffic"))},_checkButtonAppearance:function(){var t="small"==this.getData().controlState.get("size")?"iconOnly":"iconWithText";t!=this._buttonAppearance&&(this._clearAppearance(this._buttonAppearance),this._buttonAppearance=t,this._applyAppearance(t),this._updateWidth(),this._checkLeftSide())},_onTrafficShownChange:function(){this._checkSelected(),this._checkIconStyle(),this._checkLeftSide()},_checkSelected:function(){var t=this.getData().controlState.get("trafficShown");t!=this._selected&&(t?(o.add(this._buttonElement,y.addPrefix(b.buttonCheckedState)),o.add(this._buttonElement,y.addPrefix(b.buttonAnimation)),this._updateWidth()):(o.remove(this._buttonElement,y.addPrefix(b.buttonAnimation)),o.remove(this._buttonElement,y.addPrefix(b.buttonCheckedState)),this._removeWidth()),this._checkLeftSide(),this._selected=t)},_onTitleSizeChange:function(t){t.stopPropagation(),this._updateWidth()},_checkLeftSide:function(){var t=this.getData().controlState,e=t.get("trafficShown")&&"small"!=t.get("size","large");this._isLeft!=e&&(e?o.add(this._buttonElement,y.addPrefix(b.buttonPinLeftState)):o.remove(this._buttonElement,y.addPrefix(b.buttonPinLeftState)),this._isLeft=e)},_updateWidth:function(){var t="small"==this.getData().controlState.get("size");if(!t){var e=m.computeByContent(this._buttonElement).width+1,n=function(){e!=this._width&&(i.css(this._buttonElement,{width:e+"px"}),this._width=e)};this._clearWidthTimeout(),this._lastWidthTimeout=window.setTimeout(f(n,this),0)}},_removeWidth:function(){this._clearWidthTimeout(),i.css(this._buttonElement,{width:void 0})},_clearWidthTimeout:function(){this._lastWidthTimeout&&(window.clearTimeout(this._lastWidthTimeout),this._lastWidthTimeout=null)},_createButtonContentLayout:function(){var t=(this._buttonElement,a.findByPrefixedClass(this.getParentElement(),b.buttonText));this._buttonContentLayout=new g(this.getData()),this._buttonContentLayout.events.setParent(new d(this.events,new _(this))),this._buttonContentLayout.setParentElement(t),this._buttonContentLayout.events.add("sizechange",this._onTitleSizeChange,this),this._updateWidth()},_clearButtonContentLayout:function(){this._buttonContentLayout.events.remove("sizechange",this._onTitleSizeChange,this),this._buttonContentLayout.events.setParent(null),this._buttonContentLayout.setParentElement(null),this._buttonContentLayout.destroy()},_createSettingsButtonLayout:function(){this._settingsButtonLayout=new p(this.getData()),this._settingsButtonLayout.events.setParent(new d(this.events,new _(this))),this._settingsButtonLayout.setParentElement(this.getParentElement())},_clearSettingsButtonLayout:function(){this._settingsButtonLayout.events.setParent(null),this._settingsButtonLayout.setParentElement(null),this._settingsButtonLayout.destroy()}});h.add("traffic#controlButtonLayout",v),t(v)});}],
['@.', function (ym) {
ym.modules.define("theme.islands.traffic.layout.control.ForecastButtonTitle",["templateLayoutFactory","layout.storage","localization.common.current","traffic.weekDays","Monitor","formatter","util.bind"],function(t,e,i,o,n,a,s,r){function c(t){return"on"+t.slice(0,1).toUpperCase()+t.slice(1)}function l(t){return t<10?"0"+t.toString():t}var u=e.createClass("{{localization.Traffic.jams}}",{build:function(){u.superclass.build.call(this),this._providerStateMonitor=new a(this.getData().control.getProvider().state).add(["isInited","level","forecastTimestamp","timeZone","dst"],this._checkState,this),this._checkState()},clear:function(){this._clearContentTimeout(),this._providerStateMonitor.destroy(),u.superclass.clear.call(this)},_checkState:function(){var t="";if(this._providerStateMonitor.get("isInited")){var e=this._providerStateMonitor.get("level"),i=this.getData().control.getProvider().getTime();t=null!=e?s.numeral(e,o.Traffic.points):o.Traffic.jams,i&&(t+=" "+o.DaysOfWeek[c(i.dayOfWeek)],t+=", "+l(i.hours)+":"+l(i.minutes))}else t=o.Traffic.jams;this._updateContent(t)},_updateContent:function(t){function e(){this.getElement().innerHTML=t,""!=t&&this.events.fire("sizechange")}this._content!=t&&(this._content=t,this._clearContentTimeout(),this._lastContentTimeout=window.setTimeout(r(e,this),100))},_clearContentTimeout:function(){this._lastContentTimeout&&(window.clearTimeout(this._lastContentTimeout),this._lastContentTimeout=null)}});i.add("traffic#controlForecastButtonTitleLayout",u),t(u)});}],
['qp', function (ym) {
var SLIDER_WIDTH=202;ym.modules.define("theme.islands.traffic.layout.control.ForecastSliderButtonContentProvider",["util.defineClass","Monitor","util.dom.element"],function(t,e,i,o){function r(t){return t<10?"0"+t.toString():t}var n=function(t,e){this._element=t,this._data=e,this._deltaX=null,this._actualTimestamp=null,this._timeZone=null,this._provider=e.control.getProvider("traffic#forecast"),this._updateSliderLabel(),this._providerStateMonitor=new i(this._provider.state).add(["forecastTimestamp","timeZone","dst"],this._updateSliderLabel,this),this._stateMonitor=new i(e.state).add("sliderDeltaX",this._updateSliderLabel,this)};e(n,{destroy:function(){this._providerStateMonitor.destroy(),this._stateMonitor.destroy()},getData:function(){return this._data},_setButtonText:function(t){o.html(this._element,t)},_updateSliderLabel:function(){var t,e=this._provider.getTime();e&&(t=r(e.hours)+":"+r(e.minutes)),t&&this._setButtonText(t)}}),t(n)});}],
['@-', function (ym) {
ym.modules.define("theme.islands.traffic.layout.control.Popup",["templateLayoutFactory","layout.storage","traffic.layout.settings.html","theme.islands.traffic.layout.control.Switcher","util.dom.element","util.dom.style","Monitor","util.bind","theme.islands.traffic.control.ActualForecastPopupContentComponent","theme.islands.traffic.control.ArchivePopupContentComponent"],function(t,e,i,a,n,o,l,s,r,c,h){var p=e.createClass(a,{build:function(){p.superclass.build.call(this),this._trafficPanelElement=o.findByPrefixedClass(this.getParentElement(),"traffic__panel-content"),this._panelElement=o.findByPrefixedClass(this.getParentElement(),"traffic__panel"),l.patch(this._panelElement,{selectable:!1});var t={parentNode:this._trafficPanelElement};this._weekDaysElement=o.create(t),this._actualSliderElement=o.create(t),this._archiveSliderElement=o.create(t),this._footerElement=o.create(t),this._applyPopupWidth(),this._optionMonitor=new s(this.getData().options).add("popupWidth",this._applyPopupWidth,this),this._actualForecastComponent=new c(this,this._actualSliderElement,this._footerElement),this._archiveComponent=new h(this,this._archiveSliderElement,this._weekDaysElement,this._footerElement)},clear:function(){this._actualForecastComponent.destroy(),this._archiveComponent.destroy(),this._optionMonitor.destroy(),p.superclass.clear.call(this)},_applyPopupWidth:function(){l.css(this._panelElement,{width:this.getData().options.get("popupWidth","270px")})}});i.add("traffic#controlPopupLayout",p),t(p)});}],
['qx', function (ym) {
ym.modules.define("theme.islands.traffic.layout.control.PopupError",["templateLayoutFactory","traffic.layout.error.html","layout.storage"],function(o,r,t,a){var e=r.createClass(t);a.add("traffic#controlPopupErrorLayout",e),o(e)});}],
['@_', function (ym) {
ym.modules.define("theme.islands.traffic.layout.control.SettingsButton",["templateLayoutFactory","traffic.layout.settingsButton.html","util.dom.style","util.dom.className","util.dom.element","util.dom.reaction.hover","util.dom.reaction.hold","layout.storage","Monitor","domEvent.manager","util.css","yandex.counter"],function(t,e,n,i,s,o,a,c,l,d,r,h,u){var _={buttonRight:"float-button_side_right",buttonCheckedState:"_checked"},g=h,m=e.createClass(n,{build:function(){m.superclass.build.call(this);var t=this.getParentElement();this._settingsButtonElement=o.findByPrefixedClass(t,_.buttonRight),this._expanded=!1,this._checkExpanded(),this._controlStateMonitor=new d(this.getData().controlState).add("expanded",this._checkExpanded,this),this._setupEvents(),this._setupHoverReactions()},clear:function(){this._clearEvents(),this._controlStateMonitor.destroy(),this._clearHoverReactions(),m.superclass.clear.call(this)},_setupHoverReactions:function(){this._hoverReaction=a.reaction({element:this._settingsButtonElement,targetElement:this._settingsButtonElement,toggleCssClass:g.addPrefix("button_hovered_yes")})},_clearHoverReactions:function(){this._hoverReaction.disable()},_setupEvents:function(){r.add(this._settingsButtonElement,"click",this._onSettingsButtonClick,this)},_clearEvents:function(){r.remove(this._settingsButtonElement,"click",this._onSettingsButtonClick,this)},_onSettingsButtonClick:function(){this.getData().controlState.get("expanded")?this.events.fire("collapse"):this.events.fire("expand")},_checkExpanded:function(){var t=this.getData().controlState.get("expanded",!1);t!=this._expanded&&(t?s.add(this._settingsButtonElement,g.addPrefix(_.buttonCheckedState)):s.remove(this._settingsButtonElement,g.addPrefix(_.buttonCheckedState)),this._expanded=t)}});l.add("traffic#controlSettingsButtonLayout",m),t(m)});}],
['@z', function (ym) {
ym.modules.define("theme.islands.traffic.layout.control.Switcher",["templateLayoutFactory","util.dom.element","util.dom.className","domEvent.manager","layout.storage","traffic.layout.settings.switcher.html","Monitor","util.css","yandex.counter"],function(t,e,i,r,s,a,c,o,d,h){var n=e.createClass(c,{build:function(){n.superclass.build.call(this);var t=this.getParentElement();this._todayItem=i.findByPrefixedClass(t,"traffic__switcher-item_data_actual"),this._statisticsItem=i.findByPrefixedClass(t,"traffic__switcher-item_data_archive"),this._applyProvider(),this._controlStateMonitor=new o(this.getData().controlState).add("providerKey",this._onProviderChange,this)},clear:function(){this._controlStateMonitor.destroy(),this._clearProvider(),n.superclass.clear.call(this)},_setupEvents:function(){"traffic#archive"==this._providerKey?s.add(this._todayItem,"click",this._onTodayItemClick,this):s.add(this._statisticsItem,"click",this._onStatisticsItemClick,this)},_clearEvents:function(){"traffic#archive"==this._providerKey?s.remove(this._todayItem,"click",this._onTodayItemClick,this):s.remove(this._statisticsItem,"click",this._onStatisticsItemClick,this)},_onTodayItemClick:function(){this.events.fire("providerkeychange",{newProviderKey:this.getData().state.get("previousProviderKey","traffic#actual")})},_onStatisticsItemClick:function(){this.events.fire("providerkeychange",{newProviderKey:"traffic#archive"})},_onProviderChange:function(){this._clearProvider(),this._applyProvider()},_applyProvider:function(){this._providerKey=this.getData().controlState.get("providerKey"),"traffic#archive"==this._providerKey?r.add(this._statisticsItem,d.addPrefix("traffic__switcher-item_selected_yes")):r.add(this._todayItem,d.addPrefix("traffic__switcher-item_selected_yes")),this._setupEvents()},_clearProvider:function(){this._clearEvents(),"traffic#archive"==this._providerKey?r.remove(this._statisticsItem,d.addPrefix("traffic__switcher-item_selected_yes")):r.remove(this._todayItem,d.addPrefix("traffic__switcher-item_selected_yes")),this._providerKey=null}});a.add("traffic#controlPopupSwitcherLayout",n),t(n)});}],
['45', function (ym) {
ym.modules.define('traffic', ["system.provideCss"], function (provide, systemProvideCss) {
systemProvideCss('.ymaps-2-1-64-traffic{box-shadow:0 1px 2px 1px rgba(0,0,0,.15),0 2px 5px -3px rgba(0,0,0,.15);border-radius:3px;position:relative;display:inline-block}.ymaps-2-1-64-traffic .ymaps-2-1-64-float-button{box-shadow:none!important;white-space:nowrap;text-align:left;overflow:hidden}.ymaps-2-1-64-traffic .ymaps-2-1-64-float-button.ymaps-2-1-64-_pin_right{overflow:visible}.ymaps-2-1-64-traffic .ymaps-2-1-64-float-button.ymaps-2-1-64-_pin_right:before{content:\'\';position:absolute;top:-1px;left:-1px;bottom:-1px;width:0;border-left:1px solid rgba(0,0,0,.15)}.ymaps-2-1-64-traffic-week-days{display:block}.ymaps-2-1-64-button_traffic_left_animation{-webkit-transition:width .3s ease-out;transition:width .3s ease-out}.ymaps-2-1-64-traffic__icon{display:inline-block;width:16px;height:16px;border:5px solid transparent;background-repeat:no-repeat;background-position:center;vertical-align:top}.ymaps-2-1-64-_disabled .ymaps-2-1-64-traffic__icon,.ymaps-2-1-64-traffic__slider-button.ymaps-2-1-64-_disabled .ymaps-2-1-64-traffic__slider-button-text{opacity:.5}.ymaps-2-1-64-traffic__icon_icon_settings{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiI+PHBhdGggZmlsbD0iIzU1NSIgZD0iTTUuMTQgMS4wN0w1LjMgMGgxLjRsLjE2IDEuMDdjLjc0LjEzIDEuNDIuNDIgMi4wMS44NGwuODgtLjY1Ljk5IDEtLjY1Ljg3Yy40Mi41OS43IDEuMjcuODQgMkwxMiA1LjN2MS40bC0xLjA3LjE2YTQuOTcgNC45NyAwIDAgMS0uODQgMi4wMWwuNjUuODgtMSAuOTktLjg3LS42NWMtLjU5LjQyLTEuMjcuNy0yIC44NEw2LjcgMTJINS4zbC0uMTYtMS4wN2E0Ljk3IDQuOTcgMCAwIDEtMi4wMS0uODRsLS44OC42NS0uOTktMSAuNjUtLjg3YTQuOTcgNC45NyAwIDAgMS0uODQtMkwwIDYuN1Y1LjNsMS4wNy0uMTZjLjEzLS43NC40Mi0xLjQyLjg0LTIuMDFsLS42NS0uODggMS0uOTkuODcuNjVjLjU5LS40MiAxLjI3LS43IDItLjg0ek02IDEwYTQgNCAwIDEgMCAwLTggNCA0IDAgMCAwIDAgOHptMi00YTIgMiAwIDEgMC00IDAgMiAyIDAgMCAwIDQgMHpNNSA2YTEgMSAwIDEgMSAyIDAgMSAxIDAgMCAxLTIgMHoiLz48L3N2Zz4=)}.ymaps-2-1-64-traffic__icon_icon_off{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxOCI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBmaWxsPSIjOTk5ODk4IiBkPSJNLjE3IDguMmMuMiAxLjA0IDEuMSAxLjY0IDIuOTQgMS42NCAxLS41OSAxLTYuMDYgMy44LTcuMjIuNC0uMTcuNzgtLjMgMS4xNy0uNDJhNyA3IDAgMCAwIC41LS4xNlM3Ljk3IDIgNy4yOCAyaC0uMThjLS42MiAwLS44LjA4LTEuNDUuMTVBNi40OCA2LjQ4IDAgMCAwIC40MyA2LjI3Yy0uMTIuMzYtLjIuNy0uMjUgMXYuOTJ6Ii8+PHBhdGggZmlsbD0iI2JmYmZiZiIgZD0iTTkuNTMgMTYuMDNhNy4wMSA3LjAxIDAgMSAwLTEuNDQgMGgxLjQ0eiIvPjxwYXRoIGZpbGw9IiMyNDI3MjYiIGQ9Ik03LjkzIDEuOTdsLjkuMDJhNy4wNiA3LjA2IDAgMCAxIDYuOTYgNy41OGMtMS4wMi0uMDgtMi40My0xLjQyLTIuNzYtMi41YTYuOTIgNi45MiAwIDAgMC02LjU1LTUuMDJjLjYtLjA2IDEuMDUtLjA4IDEuNDUtLjA4eiIvPjwvZz48L3N2Zz4=)}.ymaps-2-1-64-traffic__icon_icon_green{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxOCI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBmaWxsPSIjNjA3ZTQ5IiBkPSJNLjE3IDguMmMuMiAxLjA0IDEuMSAxLjY0IDIuOTQgMS42NCAxLS41OSAxLTYuMDYgMy44LTcuMjIuNC0uMTcuNzgtLjMgMS4xNy0uNDJhNyA3IDAgMCAwIC41LS4xNlM3Ljk3IDIgNy4yOCAyaC0uMThjLS42MiAwLS44LjA4LTEuNDUuMTVBNi40OCA2LjQ4IDAgMCAwIC40MyA2LjI3Yy0uMTIuMzYtLjIuNy0uMjUgMXYuOTJ6Ii8+PHBhdGggZmlsbD0iIzY5YzAzMCIgZD0iTTkuNTMgMTYuMDNhNy4wMSA3LjAxIDAgMSAwLTEuNDQgMGgxLjQ0eiIvPjxwYXRoIGZpbGw9IiMyNDI3MjYiIGQ9Ik03LjkzIDEuOTdsLjkuMDJhNy4wNiA3LjA2IDAgMCAxIDYuOTYgNy41OGMtMS4wMi0uMDgtMi40My0xLjQyLTIuNzYtMi41YTYuOTIgNi45MiAwIDAgMC02LjU1LTUuMDJjLjYtLjA2IDEuMDUtLjA4IDEuNDUtLjA4eiIvPjwvZz48L3N2Zz4=)}.ymaps-2-1-64-traffic__icon_icon_yellow{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxOCI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBmaWxsPSIjYmQ5YzRmIiBkPSJNLjE3IDguMmMuMiAxLjA0IDEuMSAxLjY0IDIuOTQgMS42NCAxLS41OSAxLTYuMDYgMy44LTcuMjIuNC0uMTcuNzgtLjMgMS4xNy0uNDJhNyA3IDAgMCAwIC41LS4xNlM3Ljk3IDIgNy4yOCAyaC0uMThjLS42MiAwLS44LjA4LTEuNDUuMTVBNi40OCA2LjQ4IDAgMCAwIC40MyA2LjI3Yy0uMTIuMzYtLjIuNy0uMjUgMXYuOTJ6Ii8+PHBhdGggZmlsbD0iI2ZmYzA0MiIgZD0iTTkuNTMgMTYuMDNhNy4wMSA3LjAxIDAgMSAwLTEuNDQgMGgxLjQ0eiIvPjxwYXRoIGZpbGw9IiMyNDI3MjYiIGQ9Ik03LjkzIDEuOTdsLjkuMDJhNy4wNiA3LjA2IDAgMCAxIDYuOTYgNy41OGMtMS4wMi0uMDgtMi40My0xLjQyLTIuNzYtMi41YTYuOTIgNi45MiAwIDAgMC02LjU1LTUuMDJjLjYtLjA2IDEuMDUtLjA4IDEuNDUtLjA4eiIvPjwvZz48L3N2Zz4=)}.ymaps-2-1-64-traffic__icon_icon_red{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxOCI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBmaWxsPSIjYTU0MzQwIiBkPSJNLjE3IDguMmMuMiAxLjA0IDEuMSAxLjY0IDIuOTQgMS42NCAxLS41OSAxLTYuMDYgMy44LTcuMjIuNC0uMTcuNzgtLjMgMS4xNy0uNDJhNyA3IDAgMCAwIC41LS4xNlM3Ljk3IDIgNy4yOCAyaC0uMThjLS42MiAwLS44LjA4LTEuNDUuMTVBNi40OCA2LjQ4IDAgMCAwIC40MyA2LjI3Yy0uMTIuMzYtLjIuNy0uMjUgMXYuOTJ6Ii8+PHBhdGggZmlsbD0iI2ZmNTg1OCIgZD0iTTkuNTMgMTYuMDNhNy4wMSA3LjAxIDAgMSAwLTEuNDQgMGgxLjQ0eiIvPjxwYXRoIGZpbGw9IiMyNDI3MjYiIGQ9Ik03LjkzIDEuOTdsLjkuMDJhNy4wNiA3LjA2IDAgMCAxIDYuOTYgNy41OGMtMS4wMi0uMDgtMi40My0xLjQyLTIuNzYtMi41YTYuOTIgNi45MiAwIDAgMC02LjU1LTUuMDJjLjYtLjA2IDEuMDUtLjA4IDEuNDUtLjA4eiIvPjwvZz48L3N2Zz4=)}.ymaps-2-1-64-traffic__panel{position:absolute;top:100%;right:-5px;display:block;margin-top:-9999px;white-space:normal;-webkit-transform:translate3d(0,0,0)}.ymaps-2-1-64-traffic_settings_pressed .ymaps-2-1-64-traffic__panel{display:block;margin-top:13px;-webkit-transform:translate3d(0,0,0)}.ymaps-2-1-64-traffic__tail{right:31px;display:block}.ymaps-2-1-64-traffic__panel-content{display:block;overflow-x:hidden;overflow-y:auto;min-width:40px;min-height:20px;padding:0 10px 10px;border-top:7px solid #fff;border-bottom:2px solid #fff;background:#fff}.ymaps-2-1-64-traffic__panel{-webkit-transition:width .3s ease-out;transition:width .3s ease-out}.ymaps-2-1-64-traffic__panel-show-animation{-webkit-animation:traffic__panel_show_animation_keyframe .25s ease-out;animation:traffic__panel_show_animation_keyframe .25s ease-out}.ymaps-2-1-64-traffic__panel-hide-animation{-webkit-animation:traffic__panel_hide_animation_keyframe .25s ease-out;animation:traffic__panel_hide_animation_keyframe .25s ease-out}@-webkit-keyframes traffic__panel_show_animation_keyframe{0%{margin-top:0;opacity:0;-webkit-transform:translate(42%,-60%) scale(.1,.1)}to{margin-top:13px;opacity:1;-webkit-transform:scale(1,1)}}@-webkit-keyframes traffic__panel_hide_animation_keyframe{0%{margin-top:13px;opacity:1}to{margin-top:0;opacity:0;-webkit-transform:translate(42%,-60%) scale(.1,.1)}}@-webkit-keyframes traffic__panel_show_animation_keyframe{0%{margin-top:0;opacity:0;-webkit-transform:translate(42%,-60%) scale(.1,.1);transform:translate(42%,-60%) scale(.1,.1)}to{margin-top:13px;opacity:1;-webkit-transform:scale(1,1);transform:scale(1,1)}}@keyframes traffic__panel_show_animation_keyframe{0%{margin-top:0;opacity:0;-webkit-transform:translate(42%,-60%) scale(.1,.1);transform:translate(42%,-60%) scale(.1,.1)}to{margin-top:13px;opacity:1;-webkit-transform:scale(1,1);transform:scale(1,1)}}@-webkit-keyframes traffic__panel_hide_animation_keyframe{0%{margin-top:13px;opacity:1}to{margin-top:0;opacity:0;-webkit-transform:translate(42%,-60%) scale(.1,.1);transform:translate(42%,-60%) scale(.1,.1)}}@keyframes traffic__panel_hide_animation_keyframe{0%{margin-top:13px;opacity:1}to{margin-top:0;opacity:0;-webkit-transform:translate(42%,-60%) scale(.1,.1);transform:translate(42%,-60%) scale(.1,.1)}}.ymaps-2-1-64-traffic__switcher{display:block;margin-bottom:8px;border-bottom:1px solid #e5e5e5;font:13px/20px Arial,Helvetica,sans-serif}.ymaps-2-1-64-traffic__switcher-item{position:relative;top:1px;display:inline-block;cursor:pointer;color:#000;border-bottom:3px solid transparent}.ymaps-2-1-64-traffic__switcher-item:hover{color:#c00}.ymaps-2-1-64-traffic__switcher-item.ymaps-2-1-64-traffic__switcher-item_selected_yes{cursor:default;color:#000;border-bottom-color:#000}.ymaps-2-1-64-traffic__switcher-item:not(:last-child){margin-right:18px}.ymaps-2-1-64-traffic__tabs{box-sizing:border-box!important;display:block;height:20px;margin-top:0;margin-right:-4px;margin-left:-4px;text-align:justify;line-height:20px}.ymaps-2-1-64-traffic__tabs-justifier{display:inline-block;width:100%}.ymaps-2-1-64-traffic__tab{font:11px/1 Verdana,sans-serif;color:#999;cursor:pointer}.ymaps-2-1-64-traffic__tab:hover{color:#c00}.ymaps-2-1-64-traffic__tab.ymaps-2-1-64-traffic__tab_selected_yes{cursor:default;color:#000}.ymaps-2-1-64-traffic__tab-text{padding:4px}.ymaps-2-1-64-traffic__checkbox-cell{display:block;margin-top:7px;font-size:13px}.ymaps-2-1-64-traffic__slider-button{box-sizing:border-box!important;border-width:1px;border-style:solid;border-radius:3px;background-clip:border-box;color:#000;vertical-align:middle;text-decoration:none;font-family:Arial,Helvetica,sans-serif;cursor:pointer;-webkit-transition:background-color .15s ease-out,border-color .15s ease-out,opacity .15s ease-out;transition:background-color .15s ease-out,border-color .15s ease-out,opacity .15s ease-out;display:inline-block;text-align:left;height:28px;background-color:#fff;border-color:rgba(0,0,0,.2)}a.ymaps-2-1-64-traffic__slider-button,a.ymaps-2-1-64-traffic__slider-button:active,a.ymaps-2-1-64-traffic__slider-button:hover,a.ymaps-2-1-64-traffic__slider-button:link,a.ymaps-2-1-64-traffic__slider-button:visited{color:#000!important;text-decoration:none!important}.ymaps-2-1-64-traffic__slider-button-text{position:relative;border:none;text-decoration:none;white-space:nowrap;font-size:13px;line-height:26px}.ymaps-2-1-64-traffic__slider-button:hover{border-color:rgba(0,0,0,.3)}.ymaps-2-1-64-traffic__slider-button.ymaps-2-1-64-_pressed,.ymaps-2-1-64-traffic__slider-button:active{background-color:#f3f1ed}.ymaps-2-1-64-traffic__slider-button.ymaps-2-1-64-_disabled{cursor:default;background-color:#ebebeb}.ymaps-2-1-64-traffic__slider{position:relative;display:block;margin-bottom:10px;-webkit-user-select:none}.ymaps-2-1-64-traffic__slider-scale{position:relative;display:block;height:16px;margin:4px 0}.ymaps-2-1-64-traffic__slider-body{position:relative;display:block;line-height:0}.ymaps-2-1-64-traffic__slider-track{position:absolute;top:50%;display:block;cursor:pointer;right:1px;left:1px;height:6px;margin-top:-3px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.2);border-radius:3px;background-color:rgba(0,0,0,.05)}.ymaps-2-1-64-traffic__slider-button{position:relative}.ymaps-2-1-64-traffic__slider-button-text{display:inline-block;padding:0;width:46px;text-align:center}.ymaps-2-1-64-traffic__slider-label{position:absolute;color:#999;font:11px Verdana,sans-serif}.ymaps-2-1-64-traffic__slider-label_type_center{right:25%;left:25%;text-align:center}.ymaps-2-1-64-traffic__slider-label_type_right{right:0}.ymaps-2-1-64-traffic__hint{position:relative;display:block;margin-top:10px;padding:10px;background:#e5e5e5}.ymaps-2-1-64-traffic__hint-text{display:block;padding-right:10px;font:11px/16px Verdana,sans-serif}.ymaps-2-1-64-traffic__hint-close{position:absolute;top:3px;right:3px;display:block;width:13px;height:13px;cursor:pointer;background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSI+PHBhdGggZD0iTTEuNSAxLjVsNyA3TTguNSAxLjVsLTcgNyIvPjwvZz48L3N2Zz4=) center no-repeat;opacity:.3}.ymaps-2-1-64-traffic__hint-close:hover{opacity:1}.ymaps-2-1-64-traffic .ymaps-2-1-64-error-message{margin-top:16px;background-repeat:no-repeat;background-position:10px 2px}.ymaps-2-1-64-traffic__link{color:#04b;cursor:pointer}.ymaps-2-1-64-traffic__link:hover{color:#c00}', provide);
});}],
['2-', function (ym) {
ym.modules.define('traffic.layout.button.html', ["float-button","traffic","popup","popup__content","popup_theme_ffffff","popup_visibility_visible","popup_visibility_outside","popup__under","popup__under_color_white","popup__under_type_paranja","popup__tail"], function (provide) {
provide([0,"<ymaps class=\"ymaps-2-1-64-float-button ymaps-2-1-64-float-button_traffic_left\"><ymaps class=\"ymaps-2-1-64-traffic__icon ymaps-2-1-64-traffic__icon_icon_off ymaps-2-1-64-float-button-icon\"></ymaps><ymaps class=\"ymaps-2-1-64-float-button-text\"></ymaps></ymaps>"]);
});}],
['2.', function (ym) {
ym.modules.define('traffic.layout.error.html', ["error-message"], function (provide) {
provide([0,"<ymaps class=\"ymaps-2-1-64-error-message\"><ymaps class=\"ymaps-2-1-64-error-message__msg\"></ymaps></ymaps>"]);
});}],
['2*', function (ym) {
ym.modules.define('traffic.layout.html', ["traffic","popup","popup__content","popup_theme_ffffff","popup_visibility_visible","popup_visibility_outside","popup__under","popup__under_color_white","popup__under_type_paranja","popup__tail"], function (provide) {
provide([0,"<ymaps class=\"ymaps-2-1-64-traffic ymaps-2-1-64-traffic_settings_pressed\">",2002,["traffic#controlButtonLayout",[]],2002,["traffic#controlPopupLayout",[]],0,"</ymaps>"]);
});}],
['2)', function (ym) {
ym.modules.define('traffic.layout.settings.checkbox.html', ["traffic","popup","popup__content","popup_theme_ffffff","popup_visibility_visible","popup_visibility_outside","popup__under","popup__under_color_white","popup__under_type_paranja","popup__tail","check"], function (provide) {
provide([0,"<ymaps class=\"ymaps-2-1-64-traffic__checkbox-cell\"><ymaps class=\"ymaps-2-1-64-check\"><input class=\"ymaps-2-1-64-check__control\" type=\"checkbox\"><ymaps class=\"ymaps-2-1-64-check__box\"></ymaps><ymaps class=\"ymaps-2-1-64-check__label-text\">",2001,["localization.Traffic.infoLayer",[]],0,"</ymaps></ymaps></ymaps>"]);
});}],
['2:', function (ym) {
ym.modules.define('traffic.layout.settings.hint.html', ["traffic","popup","popup__content","popup_theme_ffffff","popup_visibility_visible","popup_visibility_outside","popup__under","popup__under_color_white","popup__under_type_paranja","popup__tail"], function (provide) {
provide([2003,"!data.get(\"state.popupHintClosed\")",0,"<ymaps class=\"ymaps-2-1-64-traffic__hint\"><ymaps class=\"ymaps-2-1-64-traffic__hint-close\"></ymaps><ymaps class=\"ymaps-2-1-64-traffic__hint-text\">",2001,["localization.Traffic.statisticsHint",[]],0,"</ymaps></ymaps>",2005,null]);
});}],
['2z', function (ym) {
ym.modules.define('traffic.layout.settings.html', ["traffic","popup","popup__content","popup_theme_ffffff","popup_visibility_visible","popup_visibility_outside","popup__under","popup__under_color_white","popup__under_type_paranja","popup__tail"], function (provide) {
provide([0,"<ymaps class=\"ymaps-2-1-64-traffic__panel ymaps-2-1-64-popup ymaps-2-1-64-popup_direction_down ymaps-2-1-64-popup_to_bottom ymaps-2-1-64-popup_theme_ffffff\"><ymaps class=\"ymaps-2-1-64-traffic__tail ymaps-2-1-64-popup__tail\"></ymaps><ymaps class=\"ymaps-2-1-64-traffic__panel-content\">",2002,["traffic#controlPopupSwitcherLayout",[]],0,"</ymaps></ymaps>"]);
});}],
['2J', function (ym) {
ym.modules.define('traffic.layout.settings.slider.html', ["traffic","popup","popup__content","popup_theme_ffffff","popup_visibility_visible","popup_visibility_outside","popup__under","popup__under_color_white","popup__under_type_paranja","popup__tail"], function (provide) {
provide([0,"<ymaps class=\"ymaps-2-1-64-traffic__slider\"><ymaps class=\"ymaps-2-1-64-traffic__slider-scale\"><ymaps class=\"ymaps-2-1-64-traffic__slider-label ymaps-2-1-64-traffic__slider-label_type_left\">%leftLabel</ymaps><ymaps class=\"ymaps-2-1-64-traffic__slider-label ymaps-2-1-64-traffic__slider-label_type_right\">%rightLabel</ymaps></ymaps><ymaps class=\"ymaps-2-1-64-traffic__slider-body\"><ymaps class=\"ymaps-2-1-64-traffic__slider-track\"></ymaps><ymaps class=\"ymaps-2-1-64-traffic__slider-button ymaps-2-1-64-button\" ",2009,null,0,"left: 0",2010,null,0,"><ymaps class=\"ymaps-2-1-64-traffic__slider-button-text ymaps-2-1-64-button__text\"></ymaps></ymaps></ymaps></ymaps>"]);
});}],
['2Z', function (ym) {
ym.modules.define('traffic.layout.settings.switcher.html', ["traffic","popup","popup__content","popup_theme_ffffff","popup_visibility_visible","popup_visibility_outside","popup__under","popup__under_color_white","popup__under_type_paranja","popup__tail"], function (provide) {
provide([0,"<ymaps class=\"ymaps-2-1-64-traffic__switcher\"><ymaps class=\"ymaps-2-1-64-traffic__switcher-item ymaps-2-1-64-traffic__switcher-item_data_actual\">",2001,["localization.Traffic.today",[]],0,"</ymaps><ymaps class=\"ymaps-2-1-64-traffic__switcher-item ymaps-2-1-64-traffic__switcher-item_data_archive\">",2001,["localization.Traffic.statistics",[]],0,"</ymaps></ymaps>"]);
});}],
['3b', function (ym) {
ym.modules.define('traffic.layout.settings.tabs.html', ["traffic","popup","popup__content","popup_theme_ffffff","popup_visibility_visible","popup_visibility_outside","popup__under","popup__under_color_white","popup__under_type_paranja","popup__tail"], function (provide) {
provide([0,"<ymaps class=\"ymaps-2-1-64-traffic__tabs\"><ymaps class=\"ymaps-2-1-64-traffic__tab\"><ymaps class=\"ymaps-2-1-64-traffic__tab-text\">%mon</ymaps></ymaps><ymaps class=\"ymaps-2-1-64-traffic__tab\">&nbsp;<ymaps class=\"ymaps-2-1-64-traffic__tab-text\">%tue</ymaps></ymaps><ymaps class=\"ymaps-2-1-64-traffic__tab\">&nbsp;<ymaps class=\"ymaps-2-1-64-traffic__tab-text\">%wed</ymaps></ymaps><ymaps class=\"ymaps-2-1-64-traffic__tab\">&nbsp;<ymaps class=\"ymaps-2-1-64-traffic__tab-text\">%thu</ymaps></ymaps><ymaps class=\"ymaps-2-1-64-traffic__tab\">&nbsp;<ymaps class=\"ymaps-2-1-64-traffic__tab-text\">%fri</ymaps></ymaps><ymaps class=\"ymaps-2-1-64-traffic__tab\">&nbsp;<ymaps class=\"ymaps-2-1-64-traffic__tab-text\">%sat</ymaps></ymaps><ymaps class=\"ymaps-2-1-64-traffic__tab\">&nbsp;<ymaps class=\"ymaps-2-1-64-traffic__tab-text\">%sun</ymaps></ymaps><ymaps class=\"ymaps-2-1-64-traffic__tabs-justifier\"></ymaps></ymaps>"]);
});}],
['3d', function (ym) {
ym.modules.define('traffic.layout.settingsButton.html', ["float-button","traffic","popup","popup__content","popup_theme_ffffff","popup_visibility_visible","popup_visibility_outside","popup__under","popup__under_color_white","popup__under_type_paranja","popup__tail"], function (provide) {
provide([0,"<ymaps class=\"ymaps-2-1-64-float-button ymaps-2-1-64-float-button_icon_only ymaps-2-1-64-float-button_side_right ymaps-2-1-64-float-button_checked_no ymaps-2-1-64-_pin_right\"><ymaps class=\"ymaps-2-1-64-traffic__icon ymaps-2-1-64-traffic__icon_icon_settings ymaps-2-1-64-float-button-icon\"></ymaps></ymaps>"]);
});}],
['5h', function (ym) {
ym.modules.define('zoom', ["system.provideCss"], function (provide, systemProvideCss) {
systemProvideCss('.ymaps-2-1-64-zoom{position:relative;display:block;padding:28px 0;width:28px;height:10px}.ymaps-2-1-64-zoom__button{position:absolute!important}.ymaps-2-1-64-zoom__plus{top:0}.ymaps-2-1-64-zoom__minus{bottom:0}.ymaps-2-1-64-zoom__scale{position:absolute;top:28px;bottom:28px;left:11px;width:4px;border-right:1px solid rgba(0,0,0,.2);border-left:1px solid rgba(0,0,0,.2);background:rgba(255,255,255,.4);box-shadow:1px 0 0 0 rgba(0,0,0,.15),-1px 0 0 0 rgba(0,0,0,.15)}.ymaps-2-1-64-zoom__runner{position:absolute;left:-12px;width:28px;height:15px!important;line-height:15px!important}.ymaps-2-1-64-zoom__runner__transition{-webkit-transition:top .3s;transition:top .3s}.ymaps-2-1-64-zoom .ymaps-2-1-64-float-button-icon_icon_runner{display:block;height:13px}.ymaps-2-1-64-zoom__runner .ymaps-2-1-64-zoom__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMCIgaGVpZ2h0PSI1Ij48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGZpbGw9IiM2NjYiIGQ9Ik0wIDBoMXYxSDB6bTMgMGgxdjFIM3ptMyAwaDF2MUg2em0zIDBoMXYxSDl6TTAgM2gxdjFIMHptMyAwaDF2MUgzem0zIDBoMXYxSDZ6bTMgMGgxdjFIOXptMCAwIi8+PHBhdGggZmlsbD0iI0ZGRiIgZmlsbC1vcGFjaXR5PSIuNzUiIGQ9Ik0wIDFoMXYxSDB6bTMgMGgxdjFIM3ptMyAwaDF2MUg2em0zIDBoMXYxSDl6TTAgNGgxdjFIMHptMyAwaDF2MUgzem0zIDBoMXYxSDZ6bTMgMGgxdjFIOXptMCAwIi8+PC9nPjwvc3ZnPg==);background-repeat:no-repeat;background-position:center 5px;border-top:0;border-bottom:0}.ymaps-2-1-64-zoom__minus .ymaps-2-1-64-zoom__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiI+PHBhdGggZmlsbD0iIzY2NiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNiAxMWgxNHY0SDZ6Ii8+PC9zdmc+)}.ymaps-2-1-64-zoom__plus .ymaps-2-1-64-zoom__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiI+PHBhdGggZmlsbD0iIzY2NiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTEgMTVINnYtNGg1VjZoNHY1aDV2NGgtNXY1aC00di01em0wIDAiLz48L3N2Zz4=)}', provide);
});}],
['3p', function (ym) {
ym.modules.define('zoom.layout.html', ["zoom","float-button"], function (provide) {
provide([0,"<ymaps class=\"ymaps-2-1-64-zoom\" ",2009,null,0,"height: ",2003,"data.get(\"state.size\")=='large'",0,"150",2004,null,0,"5",2005,null,0,"px",2010,null,0,"><ymaps class=\"ymaps-2-1-64-zoom__plus ymaps-2-1-64-zoom__button ymaps-2-1-64-float-button\"><ymaps class=\"ymaps-2-1-64-zoom__icon ymaps-2-1-64-float-button-icon\"></ymaps></ymaps><ymaps class=\"ymaps-2-1-64-zoom__minus ymaps-2-1-64-zoom__button ymaps-2-1-64-float-button\"><ymaps class=\"ymaps-2-1-64-zoom__icon ymaps-2-1-64-float-button-icon\"></ymaps></ymaps>",2003,"data.get(\"state.size\")=='large'",0,"<ymaps class=\"ymaps-2-1-64-zoom__scale\"><ymaps class=\"ymaps-2-1-64-zoom__runner ymaps-2-1-64-zoom__button ymaps-2-1-64-float-button\"><ymaps class=\"ymaps-2-1-64-zoom__icon ymaps-2-1-64-float-button-icon ymaps-2-1-64-float-button-icon_icon_runner\"></ymaps></ymaps></ymaps>",2005,null,0,"</ymaps>"]);
});}]
]
);